(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>i});var s=a(5155);a(2115);var r=a(9708),n=a(2085),l=a(9434);let i=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-2 aria-[invalid=true]:ring-destructive/20 dark:aria-[invalid=true]:ring-destructive/40 aria-[invalid=true]:border-destructive cursor-pointer hover:transform hover:translate-y-[-2px] hover:scale-[1.015]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-md",destructive:"bg-destructive text-destructive-foreground shadow-md hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 hover:shadow-md",outline:"border bg-background shadow-md hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 hover:shadow-md",secondary:"bg-secondary text-secondary-foreground shadow-md hover:bg-secondary/80 hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 py-1",lg:"h-12 px-6 py-3",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:n,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,l.cn)(i({variant:a,size:n,className:t})),...d})}},424:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i,t:()=>o});var s=a(5155),r=a(2115);let n={decimalPlaces:2,roundingPrecision:.01,thousandsSeparator:","},l=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,r.useState)(()=>{let e=localStorage.getItem("appSettings"),t=e?JSON.parse(e):{};return"locale"in t&&delete t.locale,{...n,...t}}),[o,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!o){try{let e=localStorage.getItem("appSettings");if(e){let t=JSON.parse(e);"locale"in t&&delete t.locale,"number"==typeof t.decimalPlaces&&"number"==typeof t.roundingPrecision&&t.roundingPrecision>0&&"string"==typeof t.thousandsSeparator&&[",",".","'"," "].includes(t.thousandsSeparator)?i(e=>({...n,...e,...t})):(console.warn("Loaded settings from localStorage are invalid or incomplete (excluding locale). Using defaults."),i(n),localStorage.removeItem("appSettings"))}else i(n)}catch(e){console.error("Failed to load settings from localStorage:",e),i(n)}d(!0)}},[o]),(0,s.jsx)(l.Provider,{value:{settings:a,saveSettings:e=>{try{let t={...void 0!==e.decimalPlaces&&{decimalPlaces:e.decimalPlaces},...void 0!==e.roundingPrecision&&{roundingPrecision:e.roundingPrecision},...void 0!==e.thousandsSeparator&&{thousandsSeparator:e.thousandsSeparator}},s={...a,...t};i(s),localStorage.setItem("appSettings",JSON.stringify(s))}catch(e){console.error("Failed to save settings to localStorage:",e)}}},children:t})},o=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useSettings must be used within a SettingsProvider");return e}},549:(e,t,a)=>{"use strict";a.d(t,{$m:()=>d,As:()=>o,nD:()=>i,ub:()=>c});var s=a(5155);a(2115);var r=a(3478),n=a(6474),l=a(9434);function i(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"accordion",...t})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.q7,{"data-slot":"accordion-item",className:(0,l.cn)("border-b last:border-b-0",t),...a})}function d(e){let{className:t,children:a,...i}=e;return(0,s.jsx)(r.Y9,{className:"flex",children:(0,s.jsxs)(r.l9,{"data-slot":"accordion-trigger",className:(0,l.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...i,children:[a,(0,s.jsx)(n.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function c(e){let{className:t,children:a,...n}=e;return(0,s.jsx)(r.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:(0,s.jsx)("div",{className:(0,l.cn)("pt-0 pb-4",t),children:a})})}},3503:(e,t,a)=>{Promise.resolve().then(a.bind(a,5560))},4165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>p,Es:()=>g,HM:()=>u,L3:()=>h,c7:()=>x,lG:()=>d,rr:()=>f});var s=a(5155),r=a(5452),n=a(2115),l=a(5363),i=a(4416),o=a(9434);function d(e){let{...t}=e;return n.useEffect(()=>{let e=e=>{if(e){let e=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight="".concat(e,"px"),document.body.style.overflow="hidden"}else document.body.style.paddingRight="",document.body.style.overflow=""},t=t=>{e(t.detail.open)};return document.addEventListener("dialogStateChange",t),()=>{document.removeEventListener("dialogStateChange",t),document.body.style.paddingRight="",document.body.style.overflow=""}},[]),(0,s.jsx)(r.bL,{onOpenChange:e=>{var a;document.dispatchEvent(new CustomEvent("dialogStateChange",{detail:{open:e}})),null==(a=t.onOpenChange)||a.call(t,e)},...t,"data-slot":"dialog"})}function c(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function u(e){let{...t}=e;return(0,s.jsx)(r.bm,{"data-slot":"dialog-close",...t})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 backdrop-blur-sm bg-black/30",t),...a})}function p(e){let{className:t,children:a,...d}=e,[u,p]=n.useState(!1);return(n.useEffect(()=>(p(!0),()=>p(!1)),[]),u)?(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(m,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-xl duration-200 sm:max-w-lg mx-auto",t),...d,children:[a,(0,s.jsx)(r.bm,{"aria-label":"Close dialog",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-none disabled:pointer-events-none cursor-pointer",children:(0,s.jsx)(l.S,{label:"Close",children:(0,s.jsx)(i.A,{className:"size-4"})})})]})]}):null}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,o.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,o.cn)("text-muted-foreground text-sm",t),...a})}},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>l});var s=a(5155);a(2115);var r=a(968),n=a(9434);function l(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},5363:(e,t,a)=>{"use strict";a.d(t,{S:()=>n});var s=a(5155);function r(e){let{children:t}=e;return(0,s.jsx)("span",{className:"absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0",style:{clip:"rect(0, 0, 0, 0)"},children:t})}function n(e){let{label:t,children:a}=e;return(0,s.jsxs)("span",{className:"inline-flex items-center justify-center",children:[a,(0,s.jsx)(r,{children:t})]})}a(2115)},5560:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>e2});var s=a(5155),r=a(2115),n=a(2085),l=a(9434);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(i({variant:a}),t),...r})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-lg border py-6 shadow-sm",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",t),...a})}var p=a(7383),x=a(5125),g=a(5339),h=a(646),f=a(9074),v=a(4861),j=a(9103),b=a(1154),y=a(9708),N=a(2177),S=a(5057);let w=N.Op,D=r.createContext({}),P=e=>{let{...t}=e;return(0,s.jsx)(D.Provider,{value:{name:t.name},children:(0,s.jsx)(N.xI,{...t})})},I=()=>{let e=r.useContext(D),t=r.useContext(F),{getFieldState:a}=(0,N.xW)(),s=(0,N.lN)({name:e.name}),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},F=r.createContext({});function C(e){let{className:t,...a}=e,n=r.useId();return(0,s.jsx)(F.Provider,{value:{id:n},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,l.cn)("grid gap-2",t),...a})})}function k(e){let{className:t,...a}=e,{error:r,formItemId:n}=I();return(0,s.jsx)(S.J,{"data-slot":"form-label","data-error":!!r,className:(0,l.cn)("data-[error=true]:text-destructive",t),htmlFor:n,...a})}function E(e){let{...t}=e,{error:a,formItemId:r,formDescriptionId:n,formMessageId:l}=I();return(0,s.jsx)(y.DX,{"data-slot":"form-control",id:r,"aria-describedby":a?"".concat(n," ").concat(l):"".concat(n),"aria-invalid":!!a,...t})}function A(e){let{className:t,...a}=e,{formDescriptionId:r}=I();return(0,s.jsx)("p",{"data-slot":"form-description",id:r,className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}function M(e){var t;let{className:a,...r}=e,{error:n,formMessageId:i}=I(),o=n?String(null!=(t=null==n?void 0:n.message)?t:""):r.children;return o?(0,s.jsx)("p",{"data-slot":"form-message",id:i,className:(0,l.cn)("text-destructive text-sm pl-3",a),...r,children:o}):null}var R=a(9092),z=a(714),L=a(2944),V=a(9282),_=a(3163),T=a(5551),O=a(6681),q=a(7038),B=a(8449);function H(e,t){return Number(Math.round(Number(e+"e"+t))+"e-"+t)}var Y=a(547);function J(e){let{...t}=e;return(0,s.jsx)(Y.bL,{"data-slot":"popover",...t})}function U(e){let{...t}=e;return(0,s.jsx)(Y.l9,{"data-slot":"popover-trigger",...t})}function G(e){let{className:t,align:a="center",sideOffset:r=4,...n}=e;return(0,s.jsx)(Y.ZL,{children:(0,s.jsx)(Y.UC,{"data-slot":"popover-content",align:a,sideOffset:r,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var W=a(4582),$=a(6474),Q=a(5196),Z=a(7863);function X(e){let{...t}=e;return(0,s.jsx)(W.bL,{"data-slot":"select",...t})}function K(e){let{...t}=e;return(0,s.jsx)(W.WT,{"data-slot":"select-value",...t})}function ee(e){let{className:t,size:a="default",children:r,...n}=e;return(0,s.jsxs)(W.l9,{"data-slot":"select-trigger","data-size":a,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,s.jsx)(W.In,{asChild:!0,children:(0,s.jsx)($.A,{className:"size-4 opacity-50"})})]})}function et(e){let{className:t,children:a,position:r="popper",...n}=e;return(0,s.jsx)(W.ZL,{children:(0,s.jsxs)(W.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,s.jsx)(es,{}),(0,s.jsx)(W.LM,{className:(0,l.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(er,{})]})})}function ea(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(W.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(W.VF,{children:(0,s.jsx)(Q.A,{className:"size-4"})})}),(0,s.jsx)(W.p4,{children:a})]})}function es(e){let{className:t,...a}=e;return(0,s.jsx)(W.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(Z.A,{className:"size-4"})})}function er(e){let{className:t,...a}=e;return(0,s.jsx)(W.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)($.A,{className:"size-4"})})}var en=a(2713),el=a(3039),ei=a(8738),eo=a(3068),ed=a(285),ec=a(2355),eu=a(3052),em=a(2507);function ep(e){var t,a;let{className:r,classNames:n,showOutsideDays:i=!0,locale:o,...d}=e;return(0,s.jsx)(em.h,{showOutsideDays:i,className:(0,l.cn)("p-3",r),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,ed.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",month_grid:"w-full border-collapse space-y-1",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,ed.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{Chevron:e=>{let{className:t,orientation:a,...r}=e;return"left"===a?(0,s.jsx)(ec.A,{className:(0,l.cn)(t,"h-4 w-4"),...r}):(0,s.jsx)(eu.A,{className:(0,l.cn)(t,"h-4 w-4"),...r})}},locale:o,weekStartsOn:null!=(a=null==o||null==(t=o.options)?void 0:t.weekStartsOn)?a:1,...d})}ep.displayName="Calendar";let ex=r.forwardRef(function(e,t){let{className:a,type:r,helperText:n,error:i,id:o,...d}=e,c=i?"".concat(o,"-error"):void 0;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("input",{id:o,ref:t,type:r,"data-slot":"input","aria-invalid":!!i,"aria-describedby":c,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","shadow-sm","selection:bg-primary selection:text-primary-foreground",i?"border-destructive ring-destructive/40 focus-visible:ring-destructive":"",a),...d}),n&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 mb-3 pl-3",children:n}),i&&(0,s.jsx)("p",{id:c,role:"alert",className:"text-sm font-medium text-destructive mt-1",children:i})]})});function eg(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,l.cn)("bg-accent animate-pulse rounded-md",t),...a})}var eh=a(4884);function ef(e){let{className:t,...a}=e;return(0,s.jsx)(eh.bL,{"data-slot":"switch",className:(0,l.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",t),...a,children:(0,s.jsx)(eh.zi,{"data-slot":"switch-thumb",className:(0,l.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var ev=a(5964),ej=a.n(ev),eb=a(1218),ey=a(5594),eN=a(221);let eS="yyyy-MM-dd",ew="dd.MM.yyyy",eD=[eS,ew,"MM/dd/yyyy","dd.MM.yy","MM/dd/yy","dd-MM-yyyy"],eP=e=>{if(!e)return null;let t=e.trim();if(!/[\.\-\/]/.test(t)||!/^(\d{4}-\d{2}-\d{2}|\d{2}\.\d{2}\.\d{4}|\d{2}\/\d{2}\/\d{4}|\d{2}-\d{2}-\d{4})$/.test(t))return null;for(let e of eD){let a=(0,ei.qg)(t,e,new Date);if((0,eo.f)(a))return(0,R.o)(a)}return null},eI=e=>ey.z.object({startDateString:ey.z.string().optional(),endDateString:ey.z.string().optional(),includeEndDate:ey.z.boolean(),splitPeriod:ey.z.enum(["yearly","quarterly","monthly"]),amounts:ey.z.array(ey.z.object({value:ey.z.string().min(1,{message:e("InvoiceForm.errorAmountValueRequired")}).refine(e=>!isNaN(parseFloat(e))&&parseFloat(e)>0,{message:e("InvoiceForm.errorAmountPositive")})})).min(1,e("InvoiceForm.errorAmountRequired"))}).refine(e=>!!eP(e.startDateString||""),{message:e("InvoiceForm.errorStartDateRequired"),path:["startDateString"]}).refine(e=>!!eP(e.endDateString||""),{message:e("InvoiceForm.errorEndDateRequired"),path:["endDateString"]}).refine(e=>{let t=eP(e.startDateString||""),a=eP(e.endDateString||"");return!t||!a||a>=t},{message:e("InvoiceForm.errorEndDateBeforeStart"),path:["endDateString"]}),eF=e=>{let{children:t,...a}=e;return(0,s.jsx)(k,{...a,style:{color:"var(--foreground)",fontWeight:500},children:t})},eC=e=>{let{className:t,...a}=e;return a.children&&"string"==typeof a.children&&a.children.length>0?(0,s.jsxs)(M,{className:(0,l.cn)("pl-3 flex items-center","py-1 px-2 rounded text-destructive font-medium",t),...a,children:[(0,s.jsx)(g.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,s.jsx)("span",{children:a.children})]}):null};function ek(e){var t,a;let{onCalculateAction:n}=e,{t:i,i18n:o}=(0,eb.Bd)(),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[y,S]=(0,r.useState)(!1),w=()=>o.language.startsWith("de")?i("InvoiceForm.supportedDateFormats",{defaultValue:"Unterst\xfctzte Formate: TT.MM.JJJJ, JJJJ-MM-TT"}):i("InvoiceForm.supportedDateFormats",{defaultValue:"Supported formats: YYYY-MM-DD, DD.MM.YYYY"}),D=eI(i),I=o.language.startsWith("de")?en.de:el.c,F=o.language.startsWith("de")?ew:eS,k=o.language.startsWith("de")?"z.B. 31.12.2023":"e.g. 2023-12-31",M=(0,N.mN)({resolver:(0,eN.u)(D),defaultValues:{startDateString:"",endDateString:"",includeEndDate:!0,splitPeriod:"yearly",amounts:[{value:""}]},mode:"onBlur"});(0,r.useEffect)(()=>{d&&x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))},[i,d]);let Y=(0,r.useCallback)(e=>{m(!0),x(i("InvoiceForm.calculatingButton"));let t=eP(e.startDateString||""),a=eP(e.endDateString||"");if(!t||!a){console.error("Parsed dates are invalid despite passing Zod validation."),n(null,null,i("Errors.unexpectedError")),m(!1),x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}));return}let s=e.amounts.map(e=>Number(e.value)),r=e.splitPeriod||"yearly",l={startDate:t,endDate:a,includeEndDate:e.includeEndDate,splitPeriod:r,amounts:s};n(l,null,void 0);let o={startDate:t,endDate:a,includeEndDate:e.includeEndDate,amounts:s,splitPeriod:r};console.log("Calculating with input:",o);try{let e=function(e){let t=e.splitPeriod||"yearly",a={totalDuration:{days:0,start:"",end:"",included:e.includeEndDate},periodSegments:[],amountCalculations:[]};if(!e.amounts||0===e.amounts.length)return{totalDays:0,originalTotalAmount:0,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"At least one amount is required."},splitPeriodUsed:t};if(e.amounts.some(e=>isNaN(e)||null===e))return{totalDays:0,originalTotalAmount:0,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"Invalid non-numeric amount provided."},splitPeriodUsed:t};let s=H(e.amounts.reduce((e,t)=>e+t,0),2),r=(0,R.o)(e.startDate),n=(0,R.o)(e.endDate);if(e.includeEndDate&&(n=(0,z.f)(n,1)),a.totalDuration.start=(0,O.GP)(r,"yyyy-MM-dd"),a.totalDuration.end=(0,O.GP)(e.includeEndDate?e.endDate:(0,z.f)(n,-1),"yyyy-MM-dd"),r>=n)return{totalDays:0,originalTotalAmount:s,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"Start date must be before the effective end date."},splitPeriodUsed:t};let l=(0,B.c)(n,r);if(a.totalDuration.days=l,l<=0)return{totalDays:0,originalTotalAmount:s,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"Calculated duration is zero or negative."},splitPeriodUsed:t};let i={},o=r;for(;o<n;){let e=function(e,t){let a=(0,T.C)(e);switch(t){case"monthly":return(0,O.GP)(e,"yyyy-MM");case"quarterly":let s=(0,q.F)(e);return"".concat(a,"-Q").concat(s);default:return a.toString()}}(o,t),a=function(e,t){switch(t){case"monthly":return(0,R.o)((0,z.f)((0,L.p)(e),1));case"quarterly":return(0,R.o)((0,z.f)((0,V.j)(e),1));default:return(0,R.o)((0,z.f)((0,_.Q)(e),1))}}(o,t),s=n<a?n:a,r=(0,B.c)(s,o);if(r>0){let t=r/l;i[e]||(i[e]={days:0,proportion:0}),i[e].days+=r,i[e].proportion+=t}o=s}a.periodSegments=Object.entries(i).map(e=>{let[t,a]=e;return{periodIdentifier:t,days:a.days,proportion:a.proportion}}).sort((e,t)=>e.periodIdentifier.localeCompare(t.periodIdentifier));let d=[];for(let t of e.amounts){let e={originalAmount:t,periodSplits:[],discrepancy:0,finalSum:0},s=[];for(let a in i){let r=t*i[a].proportion;s.push({periodIdentifier:a,rawSplit:r}),e.periodSplits.push({periodIdentifier:a,rawSplit:r,roundedSplit:0,adjustment:0})}let r=s.map(e=>({...e,roundedSplit:H(e.rawSplit,2)}));r.forEach(t=>{let a=e.periodSplits.find(e=>e.periodIdentifier===t.periodIdentifier);a&&(a.roundedSplit=t.roundedSplit)});let n=H(r.reduce((e,t)=>e+t.roundedSplit,0),2),l=H(t-n,2);if(e.discrepancy=l,0!==l&&r.length>0){let t=s.reduce((e,t)=>Math.abs(t.rawSplit)>Math.abs(e.rawSplit)?t:e).periodIdentifier,a=r.find(e=>e.periodIdentifier===t);if(a){a.roundedSplit=H(a.roundedSplit+l,2);let s=e.periodSplits.find(e=>e.periodIdentifier===t);s&&(s.roundedSplit=a.roundedSplit,s.adjustment=l),e.adjustmentAppliedToPeriod=t}else console.warn("Could not find period to apply adjustment, discrepancy unapplied for this amount.")}let o={};r.forEach(e=>{o[e.periodIdentifier]={splitAmount:e.roundedSplit}});let c=H(r.reduce((e,t)=>e+t.roundedSplit,0),2);e.finalSum=c,d.push({originalAmount:t,adjustedTotalAmount:c,splits:o}),a.amountCalculations.push(e)}let c=Object.entries(i).map(e=>{let[t,a]=e,s=0;return d.forEach(e=>{var a;s+=(null==(a=e.splits[t])?void 0:a.splitAmount)||0}),{periodIdentifier:t,daysInPeriod:a.days,proportion:a.proportion,totalSplitAmount:H(s,2)}}).sort((e,t)=>e.periodIdentifier.localeCompare(t.periodIdentifier)),u=H(c.reduce((e,t)=>e+t.totalSplitAmount,0),2),m=H(s-u,2);return Math.abs(m)>.01*e.amounts.length&&console.warn("Potential rounding discrepancy: Original ".concat(s,", Adjusted ").concat(u,", Diff ").concat(m)),{totalDays:l,originalTotalAmount:s,adjustedTotalAmount:u,resultsPerAmount:d,aggregatedSplits:c,calculationSteps:a,splitPeriodUsed:t}}(o);console.log("Calculation Results:",e),setTimeout(()=>{var t;(null==(t=e.calculationSteps)?void 0:t.error)?(n(l,null,e.calculationSteps.error),x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))):e.aggregatedSplits&&0!==e.aggregatedSplits.length?(n(l,e),x(i("InvoiceForm.calculationComplete",{defaultValue:"Split completed successfully!"})),S(!0),setTimeout(()=>{x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"})),S(!1)},2e3)):(n(l,null,"Calculation completed but resulted in no splits."),x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))),m(!1)},300)}catch(e){console.error("Calculation Error:",e),n(l,null,e instanceof Error?e.message:"An unexpected error occurred during calculation."),setTimeout(()=>{m(!1),x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))},300)}},[i,m,x,n,S]);(0,r.useEffect)(()=>{if(d){let e=new URLSearchParams(window.location.search),t=e.get("startDate"),a=e.get("endDate"),s=e.get("amount"),r=e.get("includeEndDate"),n=e.get("splitPeriod");if(t||a||s){if(t){let e=eP(t);if(e){let t=(0,O.GP)(e,F);M.setValue("startDateString",t)}}if(a){let e=eP(a);if(e){let t=(0,O.GP)(e,F);M.setValue("endDateString",t)}}if(r&&M.setValue("includeEndDate","true"===r),n&&["yearly","quarterly","monthly"].includes(n)&&M.setValue("splitPeriod",n),s){let e=s.replace(/,/g,"");M.setValue("amounts",[{value:e}])}if(M.trigger(),setTimeout(()=>{M.formState.isValid&&M.handleSubmit(Y)()},1e3),window.history&&window.history.replaceState){let e=window.location.pathname+window.location.hash;window.history.replaceState({},document.title,e)}}}},[d,M,F,Y]);let W=(0,N.FH)({control:M.control,name:["startDateString","endDateString","includeEndDate","amounts","splitPeriod"]}),$="invoiceFormDataCache",{fields:Q,append:Z,remove:es,replace:er}=(0,N.jz)({control:M.control,name:"amounts"});(0,r.useEffect)(()=>{let e={startDateString:void 0,endDateString:void 0,includeEndDate:!1,splitPeriod:"yearly",amounts:[{value:""}]},t=sessionStorage.getItem($),a=!1;if(t)try{let e=JSON.parse(t);if(e&&"object"==typeof e&&void 0!==e.startDateString&&void 0!==e.endDateString&&"boolean"==typeof e.includeEndDate&&["yearly","quarterly","monthly"].includes(e.splitPeriod)&&Array.isArray(e.amounts)&&e.amounts.length>0&&e.amounts.every(e=>"object"==typeof e&&null!==e&&"string"==typeof e.value)){let{amounts:t,...s}=e;M.reset(s),er(t),a=!0}else console.warn("Cached data structure is invalid, using defaults."),sessionStorage.removeItem($)}catch(e){console.error("Failed to parse cached form data:",e),sessionStorage.removeItem($)}a||(M.reset(e),er(e.amounts)),c(!0),x(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))},[i,M,er,n]);let ei=(0,r.useMemo)(()=>ej()(e=>{try{d&&sessionStorage.setItem($,JSON.stringify(e))}catch(e){console.error("Failed to save form data to cache:",e)}},500),[d]),eo=(0,r.useCallback)(e=>{ei(e)},[ei]);(0,r.useEffect)(()=>{eo(M.getValues())},[W,eo,M]);let[ec,eu]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),ev=e=>{if(e){let t=(0,O.GP)(e,F);M.setValue("startDateString",t,{shouldValidate:!0})}eu(!1)},ey=e=>{if(e){let t=(0,O.GP)(e,F);M.setValue("endDateString",t,{shouldValidate:!0})}eh(!1)},eD=e=>{let t=e.target.value;M.setValue("startDateString",t,{shouldValidate:!0}),M.trigger("startDateString").then(()=>{let e=eP(t);t&&!e&&M.setError("startDateString",{type:"manual",message:w()})})},ek=e=>{let t=e.target.value;M.setValue("endDateString",t,{shouldValidate:!1});let a=eP(t),s=eP(M.getValues("startDateString")||"");M.clearErrors("endDateString"),t&&!a?M.setError("endDateString",{type:"manual",message:w()}):a&&s&&a<s&&M.setError("endDateString",{type:"manual",message:i("InvoiceForm.errorEndDateBeforeStart")}),M.trigger("endDateString")};return d?(0,s.jsx)(N.Op,{...M,children:(0,s.jsxs)("form",{onSubmit:M.handleSubmit(Y),className:(0,l.cn)("space-y-6","opacity-0 transition-opacity duration-500 ease-in-out",d&&"opacity-100"),children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"text-xl font-semibold mb-8",children:i("InvoiceForm.title")})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(P,{control:M.control,name:"startDateString",render:e=>{var t,a;let{field:r}=e;return(0,s.jsxs)(C,{className:"flex flex-col",children:[(0,s.jsx)(eF,{children:i("InvoiceForm.startDateLabel")}),(0,s.jsxs)(J,{open:ec,onOpenChange:eu,children:[(0,s.jsx)(E,{children:(0,s.jsxs)("div",{className:"w-full relative",children:[(0,s.jsx)(ex,{value:r.value,onChange:e=>{r.onChange(e),eD(e)},onBlur:()=>M.trigger("startDateString"),placeholder:k,className:"w-full pr-10 ".concat(M.formState.errors.startDateString?"border-destructive focus:border-destructive focus:ring-2 focus:ring-destructive/20":""),autoFocus:!0}),r.value&&!M.formState.errors.startDateString&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-10 flex items-center",children:(0,s.jsx)(h.A,{className:"h-4 w-4 text-green-500"})}),M.formState.errors.startDateString&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-10 flex items-center",children:(0,s.jsx)(g.A,{className:"h-4 w-4 text-destructive"})}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,s.jsx)(U,{asChild:!0,children:(0,s.jsx)(ed.$,{type:"button",variant:"ghost",className:"h-7 w-7 p-0","aria-label":"Pick a date",children:(0,s.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})})})})]})}),(0,s.jsx)(G,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(ep,{mode:"single",selected:eP(null!=(a=M.watch("startDateString"))?a:"")||void 0,onSelect:ev,initialFocus:!0,locale:I})})]}),(0,s.jsx)(eC,{className:"text-xs mt-1",children:null==(t=M.formState.errors.startDateString)?void 0:t.message})]})}}),(0,s.jsx)(P,{control:M.control,name:"endDateString",render:e=>{var t,a;let{field:r}=e;return(0,s.jsxs)(C,{className:"flex flex-col",children:[(0,s.jsx)(eF,{children:i("InvoiceForm.endDateLabel")}),(0,s.jsxs)(J,{open:em,onOpenChange:eh,children:[(0,s.jsx)(E,{children:(0,s.jsxs)("div",{className:"w-full relative",children:[(0,s.jsx)(ex,{value:r.value,onChange:e=>{r.onChange(e),ek(e)},onBlur:()=>M.trigger("endDateString"),placeholder:k,className:"w-full pr-10 ".concat(M.formState.errors.endDateString?"border-destructive focus:border-destructive focus:ring-2 focus:ring-destructive/20":"")}),r.value&&!M.formState.errors.endDateString&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-10 flex items-center",children:(0,s.jsx)(h.A,{className:"h-4 w-4 text-green-500"})}),M.formState.errors.endDateString&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-10 flex items-center",children:(0,s.jsx)(g.A,{className:"h-4 w-4 text-destructive"})}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,s.jsx)(U,{asChild:!0,children:(0,s.jsx)(ed.$,{type:"button",variant:"ghost",className:"h-7 w-7 p-0","aria-label":"Pick a date",children:(0,s.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})})})})]})}),(0,s.jsx)(G,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(ep,{mode:"single",selected:eP(null!=(a=M.watch("endDateString"))?a:"")||void 0,onSelect:ey,initialFocus:!0,locale:I,disabled:e=>{var t;let a=eP(null!=(t=M.watch("startDateString"))?t:"");return!!a&&e<a}})})]}),(0,s.jsx)(eC,{className:"text-xs mt-1",children:null==(t=M.formState.errors.endDateString)?void 0:t.message})]})}})]}),(0,s.jsx)(P,{control:M.control,name:"includeEndDate",render:e=>{let{field:t}=e;return(0,s.jsxs)(C,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(eF,{className:"text-base",children:i("InvoiceForm.includeEndDateLabel")}),(0,s.jsx)(A,{children:i("InvoiceForm.includeEndDateDescription")})]}),(0,s.jsx)(E,{children:(0,s.jsx)(ef,{checked:t.value,onCheckedChange:t.onChange})})]})}}),(0,s.jsx)(P,{control:M.control,name:"splitPeriod",render:e=>{let{field:t}=e;return(0,s.jsxs)(C,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)("div",{className:"space-y-0.5 pr-4",children:[(0,s.jsx)(eF,{className:"text-base",children:i("InvoiceForm.splitPeriodLabel",{defaultValue:"Split Period"})}),(0,s.jsx)(A,{children:i("InvoiceForm.splitPeriodDescription",{defaultValue:"Choose how to split the invoice amounts."})})]}),(0,s.jsxs)("div",{className:"min-w-[120px]",children:[(0,s.jsxs)(X,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(E,{children:(0,s.jsx)(ee,{className:"w-full",children:(0,s.jsx)(K,{placeholder:i("InvoiceForm.selectPeriodPlaceholder",{defaultValue:"Select..."})})})}),(0,s.jsxs)(et,{children:[(0,s.jsx)(ea,{value:"yearly",children:i("InvoiceForm.periodYearly",{defaultValue:"Yearly"})}),(0,s.jsx)(ea,{value:"quarterly",children:i("InvoiceForm.periodQuarterly",{defaultValue:"Quarterly"})}),(0,s.jsx)(ea,{value:"monthly",children:i("InvoiceForm.periodMonthly",{defaultValue:"Monthly"})})]})]}),(0,s.jsx)(eC,{})]})]})}}),(0,s.jsxs)("div",{className:"space-y-5 rounded-lg border p-6 shadow-xs",children:[(0,s.jsx)(eF,{className:"text-base",children:i("InvoiceForm.amountsLabel")}),(0,s.jsx)(A,{children:i("InvoiceForm.amountsDescription")}),Q.map((e,t)=>(0,s.jsx)(P,{control:M.control,name:"amounts.".concat(t,".value"),render:e=>{var a,r;let{field:n}=e;return(0,s.jsxs)(C,{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)(eF,{className:"text-sm font-medium",children:["#",t+1]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(E,{children:(0,s.jsx)(ex,{type:"number",step:"any",className:"focus:border-primary focus:ring-2 focus:ring-primary/20 transition-transform duration-150 pr-8",...n})}),(0,s.jsxs)("div",{className:"absolute right-2 top-0 h-full flex items-center justify-center",children:[n.value&&!isNaN(parseFloat(n.value))&&parseFloat(n.value)>0&&(0,s.jsx)("div",{className:"flex items-center justify-center h-5 w-5",children:(0,s.jsx)(h.A,{className:"h-4 w-4 text-green-500"})}),(null==(r=M.formState.errors.amounts)||null==(a=r[t])?void 0:a.value)&&(0,s.jsx)("div",{className:"flex items-center justify-center h-5 w-5",children:(0,s.jsx)(g.A,{className:"h-4 w-4 text-destructive"})})]})]}),Q.length>1&&(0,s.jsx)(ed.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>es(t),className:"text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-all duration-200 shrink-0","aria-label":"Remove amount",children:(0,s.jsx)(v.A,{className:"h-4 w-4 transition-transform duration-150 hover:scale-95"})})]})]}),(0,s.jsx)(eC,{})]})}},e.id)),(0,s.jsxs)(ed.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{Z({value:""}),setTimeout(()=>{let e=document.querySelectorAll('input[type="number"]');e.length>0&&e[e.length-1].focus()},10)},className:"mt-4",children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"})," ",i("InvoiceForm.addAmountButton")]}),M.formState.errors.amounts&&!M.formState.errors.amounts.root&&M.formState.errors.amounts.message&&(0,s.jsx)("p",{className:"text-sm font-medium text-destructive",children:M.formState.errors.amounts.message}),(null==(a=M.formState.errors.amounts)||null==(t=a.root)?void 0:t.message)&&(0,s.jsx)("p",{className:"text-sm font-medium text-destructive",children:M.formState.errors.amounts.root.message})]}),(0,s.jsx)(ed.$,{type:"submit",disabled:M.formState.isSubmitting||u,className:"w-full bg-primary text-white hover:bg-primary/90 hover:scale-[1.02] px-6 py-2 h-11 font-medium rounded-md shadow-sm transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 ".concat(y?"animate-success-glow":""),children:u?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),p]}):p})]})}):(0,s.jsxs)("div",{className:"space-y-6 animate-pulse",children:[(0,s.jsx)(eg,{className:"h-8 w-3/4 mb-8"})," ",(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eg,{className:"h-4 w-1/4"})," ",(0,s.jsx)(eg,{className:"h-10 w-full"})," "]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eg,{className:"h-4 w-1/4"})," ",(0,s.jsx)(eg,{className:"h-10 w-full"})," "]})]}),(0,s.jsx)(eg,{className:"h-20 w-full p-4"})," ",(0,s.jsx)(eg,{className:"h-20 w-full p-4"})," ",(0,s.jsxs)("div",{className:"space-y-5 rounded-lg border p-6 shadow-xs",children:[(0,s.jsx)(eg,{className:"h-5 w-1/3 mb-2"})," ",(0,s.jsx)(eg,{className:"h-4 w-3/4 mb-4"})," ",(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(eg,{className:"h-10 flex-1"})," ",(0,s.jsx)(eg,{className:"h-8 w-8"})," "]}),(0,s.jsx)(eg,{className:"h-9 w-36"})," "]}),(0,s.jsx)(eg,{className:"h-11 w-full"})," "]})}var eE=a(549);function eA(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...a})})}function eM(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...a})}function eR(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...a})}function ez(e){let{className:t,...a}=e;return(0,s.jsx)("tfoot",{"data-slot":"table-footer",className:(0,l.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",t),...a})}function eL(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function eV(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function e_(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var eT=a(4165),eO=a(381),eq=a(424);let eB=e=>{let{children:t,...a}=e;return(0,s.jsx)(k,{...a,style:{color:"var(--foreground)",fontWeight:500},children:t})},eH=e=>{let{className:t,...a}=e;return(0,s.jsx)(M,{className:(0,l.cn)("text-destructive text-sm",t),...a})},eY=e=>{let{className:t,...a}=e,{error:r}=I();return r?null:(0,s.jsx)(A,{className:t,...a})},eJ=e=>{let{className:t,...a}=e;return(0,s.jsx)(C,{className:t,...a})},eU=ey.Ik({decimalPlaces:ey.Yj().nonempty("Decimal places is required"),roundingPrecision:ey.Yj().nonempty("Rounding precision is required"),thousandsSeparator:ey.Yj(),locale:ey.Yj()});function eG(e){var t,a;let{isOpen:n,onOpenChange:l,variant:i="ghost",size:o="icon",className:d}=e,{settings:c,saveSettings:u}=(0,eq.t)(),{t:m,i18n:p}=(0,eb.Bd)(),[x,g]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),v=void 0!==n?n:x,j=l||g,[b,y]=(0,r.useState)(!0),S=(0,N.mN)({resolver:(0,eN.u)(eU),defaultValues:{decimalPlaces:(null==(t=c.decimalPlaces)?void 0:t.toString())||"",roundingPrecision:(null==(a=c.roundingPrecision)?void 0:a.toString())||"0.01",thousandsSeparator:c.thousandsSeparator||",",locale:p.language||"en-US"},mode:"onChange"});(0,r.useEffect)(()=>{if(v){var e,t;S.reset({decimalPlaces:(null==(e=c.decimalPlaces)?void 0:e.toString())||"",roundingPrecision:(null==(t=c.roundingPrecision)?void 0:t.toString())||"0.01",thousandsSeparator:c.thousandsSeparator||",",locale:p.language||"en-US"})}},[v,c,p.language,S,","]),(0,r.useEffect)(()=>{let e=S.watch(()=>{let e=!!Object.keys(S.formState.errors).length,t=S.getValues(),a=!t.decimalPlaces||""===t.decimalPlaces;y(!e&&!a)});return()=>e.unsubscribe()},[S]),(0,r.useEffect)(()=>{f(!0)},[c]);let D=S.watch("thousandsSeparator")||",",I=h?m("SettingsModal.settingsModalTitle"):"Number Formatting Settings",F=h?m("SettingsModal.settingsModalTitle"):"Number Formatting Settings",C=h?m("SettingsModal.settingsModalDescription"):"Adjust your preferred number formatting for allocations and reports.",k=h?m("SettingsModal.saveButton"):"Save Settings";return(0,s.jsxs)(s.Fragment,{children:[!n&&!l&&(0,s.jsxs)(ed.$,{variant:i,size:o,onClick:()=>g(!0),className:d,"aria-label":I,children:[(0,s.jsx)(eO.A,{className:"size-4"}),"icon"!==o&&m("SettingsModal.settingsButtonText","Settings")]}),(0,s.jsx)(eT.lG,{open:v,onOpenChange:e=>{if(!e){var t,a;S.reset({decimalPlaces:(null==(t=c.decimalPlaces)?void 0:t.toString())||"",roundingPrecision:(null==(a=c.roundingPrecision)?void 0:a.toString())||"0.01",thousandsSeparator:c.thousandsSeparator||",",locale:p.language||"en-US"})}j(e)},children:(0,s.jsxs)(eT.Cf,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(eT.c7,{children:[(0,s.jsx)(eT.L3,{children:F}),(0,s.jsx)(eT.rr,{children:C})]}),(0,s.jsx)(w,{...S,children:(0,s.jsxs)("form",{onSubmit:S.handleSubmit(function(e){let t=Number(e.decimalPlaces);if(isNaN(t)||t<0||t>6)return void S.setError("decimalPlaces",{type:"manual",message:"Decimal places must be between 0 and 6"});let a=Number(e.roundingPrecision.replace(",","."));if(isNaN(a)||a<1e-4||a>100)return void S.setError("roundingPrecision",{type:"manual",message:"Rounding precision must be between 0.0001 and 100"});let s={decimalPlaces:t,roundingPrecision:a,thousandsSeparator:e.thousandsSeparator||",",locale:e.locale},r=e.locale;r&&p.language!==r&&p.changeLanguage(r),u(s),window.dispatchEvent(new CustomEvent("settingsChanged",{detail:{settings:s}})),j(!1)}),className:"space-y-6",children:[(0,s.jsx)(P,{control:S.control,name:"decimalPlaces",render:e=>{let{field:t}=e;return(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eB,{children:m("SettingsModal.decimalPlacesLabel")}),(0,s.jsx)(E,{children:(0,s.jsx)(ex,{required:!0,...t})}),(0,s.jsx)(eY,{children:m("SettingsModal.decimalPlacesDescription")}),(0,s.jsx)(eH,{})]})}}),(0,s.jsx)(P,{control:S.control,name:"roundingPrecision",render:e=>{let{field:t}=e;return(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eB,{children:m("SettingsModal.roundingPrecisionLabel")}),(0,s.jsx)(E,{children:(0,s.jsx)(ex,{required:!0,...t})}),(0,s.jsx)(eY,{children:m("SettingsModal.roundingPrecisionDescription")}),(0,s.jsx)(eH,{})]})}}),(0,s.jsx)(P,{control:S.control,name:"thousandsSeparator",render:e=>{let{field:t}=e;return(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eB,{children:m("SettingsModal.thousandsSeparatorLabel")}),(0,s.jsxs)(X,{onValueChange:e=>{t.onChange(e||",")},value:D,children:[(0,s.jsx)(E,{children:(0,s.jsx)(ee,{children:(0,s.jsx)(K,{children:","===D?"".concat(m("SettingsModal.comma")," (1,234.56)"):"."===D?"".concat(m("SettingsModal.period")," (1.234,56)"):"'"===D?"".concat(m("SettingsModal.apostrophe")," (1&apos;234.56)"):" "===D?"".concat(m("SettingsModal.space")," (1 234.56)"):m("SettingsModal.comma")})})}),(0,s.jsxs)(et,{children:[(0,s.jsxs)(ea,{value:",",children:[m("SettingsModal.comma")," (1,234.56)"]}),(0,s.jsxs)(ea,{value:".",children:[m("SettingsModal.period")," (1.234,56)"]}),(0,s.jsxs)(ea,{value:"'",children:[m("SettingsModal.apostrophe")," (1'234.56)"]}),(0,s.jsxs)(ea,{value:" ",children:[m("SettingsModal.space")," (1 234.56)"]})]})]}),(0,s.jsx)(eY,{children:m("SettingsModal.thousandsSeparatorDescription")}),(0,s.jsx)(eH,{})]})}}),(0,s.jsx)(eT.Es,{className:"pt-4",children:(0,s.jsx)(ed.$,{type:"submit",disabled:!b||S.formState.isSubmitting||Object.keys(S.formState.errors).length>0,children:k})})]})})]})})]})}function eW(e,t,a){if(null==e||isNaN(e))return"";let s=new Intl.NumberFormat(t,{minimumFractionDigits:a.decimalPlaces,maximumFractionDigits:a.decimalPlaces,useGrouping:!0}).format(e),r=t.startsWith("de")?".":",";return a.thousandsSeparator&&a.thousandsSeparator!==r&&(s=s.replace(RegExp("\\".concat(r),"g"),a.thousandsSeparator)),s}function e$(e,t){return null==e||isNaN(e)?"":new Intl.NumberFormat(t,{minimumFractionDigits:2,maximumFractionDigits:2}).format(100*e)+"%"}function eQ(e,t){if(!e)return"";try{let a=new Date(e+"T00:00:00Z");if(isNaN(a.getTime()))return e;return new Intl.DateTimeFormat(t,{year:"numeric",month:"numeric",day:"numeric"}).format(a)}catch(t){return console.error("Error formatting date:",t),e}}function eZ(e,t,a){if("monthly"!==t)return e;try{let[t,s]=e.split("-"),r=new Date(parseInt(t),parseInt(s)-1,1);return(0,O.GP)(r,"MMMM yyyy",{locale:"de"===a?en.de:el.c})}catch(t){return e}}let eX=e=>{let{steps:t,settings:a,splitPeriodUsed:r}=e,{t:n,i18n:l}=(0,eb.Bd)(),i=l.language;if(t.error)return(0,s.jsx)("p",{className:"text-destructive",children:t.error});let{periodSegments:o,amountCalculations:d}=t,c=e=>eW(e,i,a),u=e=>eZ(e,r,i);return(0,s.jsxs)("div",{className:"text-sm space-y-6",children:[(0,s.jsxs)("section",{className:"bg-muted/40 rounded-lg p-4 space-y-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-foreground",children:n("ResultsDisplay.totalDuration")}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs border-b pb-2 mb-2",children:[(0,s.jsx)("div",{children:n("ResultsDisplay.periodLabel")})," ",(0,s.jsxs)("div",{className:"text-right",children:[eQ(t.totalDuration.start,i)," - ",eQ(t.totalDuration.end,i)]}),(0,s.jsx)("div",{children:n("ResultsDisplay.totalDays")})," ",(0,s.jsxs)("div",{className:"text-right",children:[t.totalDuration.days," (",t.totalDuration.included?n("ResultsDisplay.inclusiveLabel"):n("ResultsDisplay.exclusiveLabel"),")"]})]}),(0,s.jsx)("h4",{className:"font-semibold text-foreground",children:n("ResultsDisplay.proportionCalculation")}),(0,s.jsx)("div",{className:"space-y-1",children:o.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,s.jsxs)("div",{className:"font-medium",children:[u(e.periodIdentifier),":"]}),(0,s.jsxs)("div",{className:"text-muted-foreground text-center",children:[e.days," / ",t.totalDuration.days," ",n("ResultsDisplay.daysLabel")]}),(0,s.jsx)("div",{className:"text-muted-foreground text-right",children:e$(e.proportion,i)})]},e.periodIdentifier))})]}),(0,s.jsxs)("section",{className:"bg-muted/40 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-foreground mb-4",children:n("ResultsDisplay.splitCalculation")}),(0,s.jsx)("div",{className:"space-y-6",children:d.map((e,t)=>(0,s.jsxs)("div",{className:"rounded-md border bg-background p-4 space-y-2 transition-shadow hover:shadow-md",children:[(0,s.jsxs)("div",{className:"font-bold text-[15px] text-primary mb-3 pb-1 border-b border-primary/20 bg-primary/[0.08] -mx-4 px-4 py-2 rounded-t-md",children:[n("ResultsDisplay.inputAmountLabel")," #",t+1,":"," ",c(e.originalAmount)]}),(0,s.jsx)("div",{className:"space-y-3",children:e.periodSplits.map((t,a)=>{var r;return(0,s.jsxs)("div",{className:"pl-2 text-xs space-y-0.5 ".concat(a<e.periodSplits.length-1?"border-b border-muted/30 pb-2":""),children:[(0,s.jsxs)("div",{className:"font-medium shrink-0 text-foreground",children:[u(t.periodIdentifier),":"]}),(0,s.jsxs)("div",{className:"text-muted-foreground ml-2",children:[(0,s.jsxs)("span",{children:[c(e.originalAmount)," *"," ",null==(r=o.find(e=>e.periodIdentifier===t.periodIdentifier))?void 0:r.proportion.toFixed(6)]}),(0,s.jsxs)("span",{className:"block sm:inline",children:[" ","= ",t.rawSplit.toFixed(6)]})]}),(0,s.jsxs)("div",{className:"ml-2 flex items-center gap-x-2",children:[(0,s.jsx)("span",{children:"→"}),(0,s.jsxs)("span",{className:"font-medium text-foreground",children:[n("ResultsDisplay.roundedLabel"),":"," ",c(t.roundedSplit)]}),0!==t.adjustment&&(0,s.jsxs)("span",{className:"text-muted-foreground text-xs",children:["(",n("ResultsDisplay.adjustmentLabel"),":"," ",c(t.adjustment),")"]})]})]},t.periodIdentifier)})}),(0,s.jsxs)("div",{className:"border-t pt-2 mt-2 space-y-1 text-xs",children:[(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-medium text-foreground",children:[n("ResultsDisplay.discrepancyLabel"),":"]}),(0,s.jsxs)("span",{className:"".concat(Math.abs(e.discrepancy)>.001?"text-amber-600 dark:text-amber-500":"text-muted-foreground/70"),children:[" ",c(e.discrepancy)]}),e.adjustmentAppliedToPeriod&&(0,s.jsxs)("span",{className:"text-muted-foreground",children:["(",n("ResultsDisplay.adjustedInYearLabel")," ",u(e.adjustmentAppliedToPeriod),")"]})]}),(0,s.jsxs)("p",{className:"font-semibold text-sm text-foreground pt-1",children:[n("ResultsDisplay.finalSumLabel"),":"," ",(0,s.jsx)("span",{className:"text-primary",children:c(e.finalSum)})]})]})]},t))})]})]})},eK=r.memo(function(e){let{results:t,inputData:a}=e,{settings:n}=(0,eq.t)(),{t:l,i18n:i}=(0,eb.Bd)(),o=i.language,{totalDays:d,originalTotalAmount:c,adjustedTotalAmount:p,resultsPerAmount:x,aggregatedSplits:g,calculationSteps:h,splitPeriodUsed:f}=t,[,v]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=()=>{v(e=>e+1)};return window.addEventListener("settingsChanged",e),()=>{window.removeEventListener("settingsChanged",e)}},[]);let j=e=>eW(e,o,n),b=e=>e$(e,o),y=e=>eQ((0,O.GP)(e,"yyyy-MM-dd"),o),N=e=>eZ(e,f,o),S=Math.abs(c-p)>n.roundingPrecision/2+1e-5;return(0,s.jsxs)("div",{className:"space-y-6 transition-opacity duration-300 ease-in-out",children:[(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md p-3 mb-6 flex items-center text-green-700 dark:text-green-400 animate-fadeIn",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"✅"}),(0,s.jsx)("span",{children:l("ResultsDisplay.successMessage",{defaultValue:"Split completed successfully! Your detailed allocation is ready."})})]}),{}),(0,s.jsx)(u,{className:"overflow-hidden shadow-md border border-border transition-all duration-300 animate-fadeIn",children:(0,s.jsxs)(m,{className:"p-6 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b pb-2 mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-primary",children:l("ResultsDisplay.summaryTitle")}),(0,s.jsx)(eG,{})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:l("ResultsDisplay.periodLabel")}),(0,s.jsxs)("div",{className:"text-right font-medium",children:[y(a.startDate)," - ",y(a.endDate)]}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:l("ResultsDisplay.totalDurationLabel")}),(0,s.jsxs)("div",{className:"text-right font-medium",children:[d," ",l("ResultsDisplay.daysLabel")]}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:l("InvoiceForm.includeEndDateLabel")}),(0,s.jsx)("div",{className:"text-right font-medium",children:a.includeEndDate?l("ResultsDisplay.yesLabel"):l("ResultsDisplay.noLabel")}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:l("InvoiceForm.splitPeriodLabel")}),(0,s.jsx)("div",{className:"text-right font-medium",children:"yearly"===f?l("InvoiceForm.periodYearly"):"quarterly"===f?l("InvoiceForm.periodQuarterly"):l("InvoiceForm.periodMonthly")}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:l("ResultsDisplay.originalTotalLabel")}),(0,s.jsx)("div",{className:"text-right font-medium text-primary",children:j(c)})]})]})}),(0,s.jsxs)("div",{className:"transition-all duration-300",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:l("ResultsDisplay.aggregatedTitle")}),(0,s.jsxs)("div",{className:"block md:hidden space-y-3 transition-all duration-300",children:[g.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-md p-3 text-sm bg-muted/20 transition-all duration-300",style:{animationDelay:"".concat(50*t,"ms")},children:[(0,s.jsx)("div",{className:"font-semibold text-base mb-1",children:N(e.periodIdentifier)}),(0,s.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2 gap-y-0.5",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l("ResultsDisplay.daysHeader"),":"]}),(0,s.jsx)("span",{className:"text-right",children:e.daysInPeriod}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l("ResultsDisplay.proportionHeader"),":"]}),(0,s.jsx)("span",{className:"text-right",children:(0,s.jsxs)("div",{className:"relative inline-block min-w-[100px] px-2 py-0.5",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 bg-primary/20 rounded-sm",style:{width:"".concat(100*e.proportion,"%"),maxWidth:"100%"}}),(0,s.jsx)("span",{className:"relative z-10",children:b(e.proportion)})]})}),x.map((t,a)=>{var n;let i=(null==(n=t.splits[e.periodIdentifier])?void 0:n.splitAmount)||0;return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["".concat(l("ResultsDisplay.amountHeader")," #").concat(a+1),":"]}),(0,s.jsx)("span",{className:"text-right",children:j(i)})]},a)}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l("ResultsDisplay.yearTotalHeader"),":"]}),(0,s.jsx)("span",{className:"text-right font-medium",children:j(e.totalSplitAmount)})]})]},"mobile-".concat(e.periodIdentifier))),(0,s.jsx)("div",{className:"border-t pt-3 mt-3 text-sm transition-all duration-300",children:(0,s.jsxs)("div",{className:"border rounded-md p-3 bg-muted/20 font-semibold",children:[(0,s.jsx)("div",{className:"font-semibold text-base mb-1",children:l("ResultsDisplay.totalHeader")}),(0,s.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-2 gap-y-0.5",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l("ResultsDisplay.daysHeader"),":"]}),(0,s.jsx)("span",{className:"text-right",children:d}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l("ResultsDisplay.proportionHeader"),":"]}),(0,s.jsx)("span",{className:"text-right",children:(0,s.jsxs)("div",{className:"relative inline-block min-w-[100px] px-2 py-0.5",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 bg-primary/20 rounded-sm",style:{width:"100%",maxWidth:"100%"}}),(0,s.jsx)("span",{className:"relative z-10",children:b(1)})]})}),x.map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["".concat(l("ResultsDisplay.amountHeader")," #").concat(t+1),":"]}),(0,s.jsx)("span",{className:"text-right",children:j(e.adjustedTotalAmount)})]},t)),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[l("ResultsDisplay.yearTotalHeader"),":"]}),(0,s.jsx)("span",{className:"text-right",children:j(p)})]})]})})]}),(0,s.jsx)("div",{className:"hidden md:block overflow-x-auto relative border rounded-md transition-all duration-300",children:(0,s.jsxs)(eA,{children:[(0,s.jsx)(eM,{children:(0,s.jsxs)(eL,{children:[(0,s.jsx)(eV,{className:"w-[150px]",children:(()=>{switch(f){case"monthly":return l("ResultsDisplay.monthHeader",{defaultValue:"Month"});case"quarterly":return l("ResultsDisplay.quarterHeader");default:return l("ResultsDisplay.yearHeader")}})()}),(0,s.jsx)(eV,{className:"text-right",children:l("ResultsDisplay.daysHeader")}),(0,s.jsx)(eV,{className:"text-right",children:l("ResultsDisplay.proportionHeader")}),(0,s.jsx)(eV,{className:"text-right",children:l("ResultsDisplay.totalSplitAmountHeader")})]})}),(0,s.jsx)(eR,{children:g.map(e=>(0,s.jsxs)(eL,{children:[(0,s.jsx)(e_,{className:"font-medium",children:N(e.periodIdentifier)}),(0,s.jsx)(e_,{className:"text-right",children:e.daysInPeriod}),(0,s.jsx)(e_,{className:"text-right",children:(0,s.jsxs)("div",{className:"relative px-3 py-1 h-8 flex items-center justify-end",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 bg-primary/20 rounded-sm",style:{width:"".concat(100*e.proportion,"%"),maxWidth:"100%"}}),(0,s.jsx)("span",{className:"relative z-10",children:b(e.proportion)})]})}),(0,s.jsx)(e_,{className:"text-right font-medium",children:j(e.totalSplitAmount)})]},e.periodIdentifier))}),(0,s.jsx)(ez,{children:(0,s.jsxs)(eL,{className:"bg-gray-50 dark:bg-gray-800/50",children:[(0,s.jsx)(e_,{className:"font-bold",children:l("ResultsDisplay.totalHeader")}),(0,s.jsx)(e_,{className:"text-right font-bold",children:d}),(0,s.jsx)(e_,{className:"text-right font-bold",children:(0,s.jsxs)("div",{className:"relative px-3 py-1 h-8 flex items-center justify-end",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 bg-primary/20 rounded-sm",style:{width:"100%"}}),(0,s.jsx)("span",{className:"relative z-10",children:b(1)})]})}),(0,s.jsx)(e_,{className:"text-right font-bold text-primary",children:j(p)})]})})]})}),S&&(0,s.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-500 mt-1 transition-colors duration-300",children:l("ResultsDisplay.roundingNote")})]}),h&&(0,s.jsx)(eE.nD,{type:"single",collapsible:!0,className:"w-full space-y-4 transition-all duration-300",children:(0,s.jsxs)(eE.As,{value:"calculation-steps",className:"bg-card rounded-lg border border-border shadow-md transition-all duration-300",children:[(0,s.jsx)(eE.$m,{className:"px-6 text-base font-semibold text-primary hover:no-underline",children:l("ResultsDisplay.calculationStepsTitle")}),(0,s.jsx)(eE.ub,{className:"p-6 pt-2",children:(0,s.jsx)(eX,{steps:h,settings:n,splitPeriodUsed:f})})]})})]})});var e0=a(1684);function e1(e){let{pageTitle:t}=e,{t:a}=(0,eb.Bd)(),[n,l]=(0,r.useState)(!1),[i,g]=(0,r.useState)(t),[h,f]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[b,y]=(0,r.useState)(null),[N,S]=(0,r.useState)(!1),w="G-9H2KTHX5YK",[D,P]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{l(!0),g(a("InvoiceForm.title")),P("true"===p.A.get("siempiBillSplitterConsent"))},[a]),(0,s.jsxs)(s.Fragment,{children:[D&&w&&(0,s.jsx)(x.GoogleAnalytics,{gaId:w}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl grow",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:i}),(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-2",children:[n?(0,s.jsx)("p",{children:a("InvoiceForm.description_p1")}):(0,s.jsx)("p",{children:"Loading description..."}),n?(0,s.jsx)("p",{children:a("InvoiceForm.description_p2")}):(0,s.jsx)("p",{})]})]}),(0,s.jsx)(u,{className:"mb-12 shadow-md",children:(0,s.jsx)(m,{className:"pt-6",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(ek,{onCalculateAction:(e,t,s)=>{f(t),s&&s.includes("At least one amount is required")?j(a("Errors.calculationErrorTitle")+": "+a("InvoiceForm.errorAmountRequired")):s&&s.includes("Start date must be before")?j(a("Errors.calculationErrorTitle")+": "+a("InvoiceForm.errorEndDateBeforeStart")):j(s?a("Errors.calculationErrorTitle")+": "+a("Errors.unexpectedError"):null),e&&t&&!s?y(e):y(null)}})})})}),(0,s.jsxs)("div",{id:"results-section",className:"mt-12 w-full flex justify-center",children:[n&&v&&(0,s.jsxs)(o,{variant:"destructive",className:"max-w-2xl",children:[(0,s.jsx)(e0.A,{className:"h-4 w-4"}),(0,s.jsx)(d,{children:a("Errors.calculationErrorTitle")}),(0,s.jsx)(c,{children:v})]}),n&&h&&b&&!v&&(0,s.jsx)(eK,{results:h,inputData:b})]})]}),n&&(0,s.jsx)(eG,{isOpen:N,onOpenChange:S})]})}function e2(){return(0,s.jsx)(e1,{pageTitle:"Invoice Calculator"})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[218,409,604,681,576,441,684,358],()=>t(3503)),_N_E=e.O()}]);