{"version":3,"file":"static/chunks/app/en/legal/terms-of-use/page-0a3d49b5a3d98b51.js","mappings":"gFAAA,uCAA2L,4HCyB3L,IAAMA,EAAoB,OAAC,CAAEC,cAAY,CAA0B,GACjE,MACE,UAACC,UAAAA,CAAQC,UAAU,4CACjB,UAACC,MAAAA,CAAID,UAAU,qCACb,UAACE,EAAAA,EAAaA,CAAAA,CACZC,cAAe,CAACC,EAAAA,CAASA,CAAC,CAC1BC,WAAY,CACVC,GAAI,OAAC,CAAE,GAAGC,EAAO,SAAK,UAACD,KAAAA,CAAI,GAAGC,CAAK,CAAEP,UAAU,gDAC/CQ,GAAI,OAAC,CAAE,GAAGD,EAAO,SAAK,UAACC,KAAAA,CAAI,GAAGD,CAAK,CAAEP,UAAU,+HAC/CS,GAAI,OAAC,CAAE,GAAGF,EAAO,SAAK,UAACE,KAAAA,CAAI,GAAGF,CAAK,CAAEP,UAAU,iDAC/CU,EAAG,OAAC,CAAE,GAAGH,EAAO,SAAK,UAACG,IAAAA,CAAG,GAAGH,CAAK,CAAEP,UAAU,wDAC7CW,GAAI,OAAC,CAAE,GAAGJ,EAAO,SAAK,UAACI,KAAAA,CAAI,GAAGJ,CAAK,CAAEP,UAAU,uEAC/CY,GAAI,OAAC,CAAE,GAAGL,EAAO,SAAK,UAACK,KAAAA,CAAI,GAAGL,CAAK,CAAEP,UAAU,0EAC/Ca,GAAI,OAAC,CAAE,GAAGN,EAAO,SAAK,UAACM,KAAAA,CAAI,GAAGN,CAAK,CAAEP,UAAU,UAC/Cc,EAAG,OAAC,CAAE,GAAGP,EAAO,SAAK,UAACO,IAAAA,CAAG,GAAGP,CAAK,CAAEP,UAAU,kCAC7Ce,OAAQ,OAAC,CAAE,GAAGR,EAAO,SAAK,UAACQ,SAAAA,CAAQ,GAAGR,CAAK,CAAEP,UAAU,kBACzD,WAECF,OAKX,EAGe,SAASkB,EAAiB,CAAsD,KAAtD,gBAAEC,CAAc,aAAEC,CAAW,CAAyB,CAAtD,EACjC,MAAEC,CAAI,GAAEC,CAAC,CAAE,CAAGC,CAAAA,EAAAA,EAAAA,EAAAA,CAAcA,GAC5BC,EAAWC,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,GACtB,CAACzB,EAAc0B,EAAgB,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAASR,GACnD,CAACS,EAAYC,EAAc,CAAGF,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAACP,GACvC,CAACU,EAAWC,EAAa,CAAGJ,CAAAA,EAAAA,EAAAA,QAAAA,CAAQA,CAAC,IAGrCK,EAAYC,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,MAAOC,IACnC,IAAIC,EAAmB,GACvB,GAAI,CACF,IAAMC,EAAW,gBAA2C,OAAlB,OAATF,EAAgB,MAAQ,GAAG,OACtDG,EAAW,MAAMC,MAAMF,GAG7B,GAAI,CAACC,EAASE,EAAE,CACd,CADgB,KACV,MAAU,6BAAsC,OAATH,IAK/CD,EAAmBK,CADH,MAAMH,EAASI,IAAI,IAEhCC,OAAO,CAAC,UAAW,IACnBA,OAAO,CAAC,uBAAwB,IAChCA,OAAO,CAAC,+BAAgC,IACxCC,IAAI,GAGPjB,EAAgBS,EAClB,CAAE,MAAOS,EAAO,CACdC,QAAQD,KAAK,CAAC,0CAA2CA,GACzDlB,EAAyB,OAATQ,EACZ,iGACA,uDACN,CACF,EAAG,CAACR,EAAgB,EAGdoB,EAAiBb,CAAAA,EAAAA,EAAAA,WAAAA,CAAWA,CAAC,IACjC,GACqBc,CAAAA,EAAAA,EAAAA,EADN,CACyBA,CAACvB,IAClBJ,CAFDA,CAGrB,CAACI,EAAUJ,EAAY,EAG1B4B,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACRjB,GAAa,GAGTV,EAAK4B,QAAQ,GAAKrB,GACpBP,EAAK6B,OAD2B,OACb,CAACtB,GAItB,IAAIuB,EAASC,SAASC,aAAa,CAAoB,qDAClDF,IAEHA,CADAA,EAASC,CADE,QACOE,aAAa,CAAC,WACzBC,GAAG,CAAG,sCACbJ,EAAOK,KAAK,EAAG,EACfJ,SAASK,IAAI,CAACC,WAAW,CAACP,IAI5BC,SAASO,KAAK,CAAGrC,EAAE,yBAA2B,iBAGhD,EAAG,CAACM,EAAYP,EAAMC,EAAE,EAGxB0B,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,GAAI,CAAClB,EAAW,OAGhB,IAAM8B,EAAwB,QAEZC,EAAhB,IAAMC,EAAUD,CAAAA,OAAAA,EAAAA,EAAYE,MAAM,EAAlBF,KAAAA,EAAAA,EAAoBZ,GAApBY,KAAoBZ,GAAYY,EAAYE,MAAM,CAG9DD,GAA8B,UAAnB,OAAOA,GAAwBE,EAAAA,EAAmBA,CAACC,QAAQ,CAACH,KACzEjC,EAAciC,GADqE,EAEzEA,GAEd,EAMA,OAHAV,SAASc,gBAAgB,CAAC,kBAAmBN,GAGtC,KACLR,SAASe,mBAAmB,CAAC,kBAAmBP,EAClD,CACF,EAAG,CAAC9B,EAAWE,EAAU,EAGzBgB,CAAAA,EAAAA,EAAAA,SAAAA,CAASA,CAAC,KACR,GAAI,CAAClB,EAAW,OAGhB,IAAMsC,EAAUtB,IAGZsB,IAAYxC,IACdC,EAAcuC,GACdpC,EAAUoC,CAFgB,EAKtB/C,EAAK4B,QAAQ,GAAKmB,GACpB/C,EAAK6B,IADwB,UACV,CAACkB,GAG1B,EAAG,CAAC5C,EAAUM,EAAWF,EAAYP,EAAMyB,EAAgBd,EAAU,EAIrE,IAAMqC,EADQ,IAAIC,OACUC,kBAAkB,CAAgB,OAAf3C,EAAsB,QAAU,QAAS,CAAE4C,KAAM,UAAWC,MAAO,OAAQC,IAAK,SAAU,GAGzI,MACE,WAACC,OAAAA,CAAKzE,UAAU,mDACd,WAACC,MAAAA,CAAID,UAAU,8BACb,UAACM,KAAAA,CAAGN,UAAU,4GACXoB,EAAE,wBAAyB,kBAE9B,UAACV,IAAAA,CAAEV,UAAU,8CACV,GAAsDmE,MAAAA,CAAnD/C,EAAE,0BAA2B,mBAAmB,KAAiB,OAAd+C,QAG3D,UAACtE,EAAAA,CAAkBC,aAAcA,MAGvC","sources":["webpack://_N_E/?0257","webpack://_N_E/./src/app/en/legal/terms-of-use/terms-of-use-client.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"C:\\\\Users\\\\Mauro\\\\Repos\\\\Siempi\\\\Saas\\\\billingperiodallocator\\\\src\\\\app\\\\en\\\\legal\\\\terms-of-use\\\\terms-of-use-client.tsx\");\n","\"use client\";\r\n\r\nimport { useCallback, useEffect, useState } from \"react\"; // Keep ReactNode? No, remove.\r\nimport { usePathname } from \"next/navigation\"; // Removed useRouter\r\nimport { useTranslation } from \"@/translations\";\r\nimport { SUPPORTED_LANGUAGES, getLanguageFromPath } from \"@/translations\"; // Need this too\r\n\r\n// Re-add ReactMarkdown related imports here if TermsOfUseContent is also moved (or keep it in page.tsx and pass down)\r\n// Let's keep TermsOfUseContent in page.tsx for now and pass it down if needed, simplifies imports\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\n\r\n// Props for the client component\r\ninterface TermsOfUseClientProps {\r\n  initialContent: string;\r\n  initialLang: string;\r\n}\r\n\r\n// Props for the content display component (can be defined here or passed)\r\ninterface TermsOfUseContentProps {\r\n  termsContent: string;\r\n}\r\n\r\n// Content display component (copied from page.tsx)\r\n// Needs ReactMarkdown and remarkGfm imports\r\nconst TermsOfUseContent = ({ termsContent }: TermsOfUseContentProps) => {\r\n  return (\r\n    <article className=\"prose prose-lg dark:prose-invert\">\r\n      <div className=\"custom-markdown-container\">\r\n        <ReactMarkdown\r\n          remarkPlugins={[remarkGfm]}\r\n          components={{\r\n            h1: ({ ...props }) => <h1 {...props} className=\"text-2xl font-bold mt-12 mb-4 text-primary\" />,\r\n            h2: ({ ...props }) => <h2 {...props} className=\"text-xl font-semibold mt-12 mb-4 bg-gradient-to-r from-legal-primary/90 to-legal-primary/70 bg-clip-text text-transparent\" />,\r\n            h3: ({ ...props }) => <h3 {...props} className=\"text-lg font-medium mt-10 mb-3 text-primary\" />,\r\n            p: ({ ...props }) => <p {...props} className=\"text-sm leading-relaxed text-muted-foreground mb-6\" />,\r\n            ul: ({ ...props }) => <ul {...props} className=\"text-sm leading-relaxed text-muted-foreground mb-6 pl-6 list-disc\" />,\r\n            ol: ({ ...props }) => <ol {...props} className=\"text-sm leading-relaxed text-muted-foreground mb-6 pl-6 list-decimal\" />,\r\n            li: ({ ...props }) => <li {...props} className=\"mb-2\" />,\r\n            a: ({ ...props }) => <a {...props} className=\"text-primary hover:underline\" />,\r\n            strong: ({ ...props }) => <strong {...props} className=\"font-semibold\" />,\r\n          }}\r\n        >\r\n          {termsContent}\r\n        </ReactMarkdown>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\n\r\nexport default function TermsOfUseClient({ initialContent, initialLang }: TermsOfUseClientProps) {\r\n  const { i18n, t } = useTranslation();\r\n  const pathname = usePathname();\r\n  const [termsContent, setTermsContent] = useState<string>(initialContent);\r\n  const [langPrefix, setLangPrefix] = useState(initialLang);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n\r\n\r\n  const loadTerms = useCallback(async (lang: string) => {\r\n    let processedContent = '';\r\n    try {\r\n      const filePath = `/terms-of-use${lang === 'de' ? '.de' : ''}.md`;\r\n      const response = await fetch(filePath);\r\n\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to load terms from ${filePath}`);\r\n      }\r\n\r\n\r\n      const content = await response.text();\r\n      processedContent = content\r\n        .replace(/^# .*$/m, '')\r\n        .replace(/^Last updated on.*$/m, '')\r\n        .replace(/^Zuletzt aktualisiert am.*$/m, '')\r\n        .trim();\r\n\r\n\r\n      setTermsContent(processedContent);\r\n    } catch (error) {\r\n      console.error('Error loading terms of use client-side:', error);\r\n      setTermsContent(lang === 'de'\r\n        ? 'Die Nutzungsbedingungen konnten nicht geladen werden. Bitte versuchen Sie es spÃ¤ter erneut.'\r\n        : 'Failed to load terms of use. Please try again later.');\r\n    }\r\n  }, [setTermsContent]);\r\n\r\n\r\n  const getUrlLanguage = useCallback(() => {\r\n    if (!pathname) return initialLang;\r\n    const pathLanguage = getLanguageFromPath(pathname);\r\n    return pathLanguage || initialLang;\r\n  }, [pathname, initialLang]);\r\n\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true);\r\n\r\n\r\n    if (i18n.language !== langPrefix) {\r\n      i18n.changeLanguage(langPrefix);\r\n    }\r\n\r\n\r\n    let script = document.querySelector<HTMLScriptElement>('script[src=\"https://app.privacybee.io/widget.js\"]');\r\n    if (!script) {\r\n      script = document.createElement('script');\r\n      script.src = \"https://app.privacybee.io/widget.js\";\r\n      script.defer = true;\r\n      document.head.appendChild(script);\r\n    }\r\n\r\n\r\n    document.title = t(\"Legal.termsOfUseTitle\") + \" | BillSplitter\";\r\n\r\n\r\n  }, [langPrefix, i18n, t]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (!isMounted) return;\r\n\r\n\r\n    const handleLanguageChanged = (e: Event) => {\r\n      const customEvent = e as CustomEvent;\r\n      const newLang = customEvent.detail?.language || customEvent.detail;\r\n\r\n\r\n      if (newLang && typeof newLang === 'string' && SUPPORTED_LANGUAGES.includes(newLang)) {\r\n        setLangPrefix(newLang);\r\n        loadTerms(newLang);\r\n      }\r\n    };\r\n\r\n\r\n    document.addEventListener('languageChanged', handleLanguageChanged);\r\n\r\n\r\n    return () => {\r\n      document.removeEventListener('languageChanged', handleLanguageChanged);\r\n    };\r\n  }, [isMounted, loadTerms]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (!isMounted) return;\r\n\r\n\r\n    const urlLang = getUrlLanguage();\r\n\r\n\r\n    if (urlLang !== langPrefix) {\r\n      setLangPrefix(urlLang);\r\n      loadTerms(urlLang);\r\n\r\n\r\n      if (i18n.language !== urlLang) {\r\n        i18n.changeLanguage(urlLang);\r\n      }\r\n    }\r\n  }, [pathname, isMounted, langPrefix, i18n, getUrlLanguage, loadTerms]);\r\n\r\n\r\n  const today = new Date();\r\n  const formattedDate = today.toLocaleDateString(langPrefix === 'de' ? 'de-DE' : 'en-US', { year: 'numeric', month: 'long', day: 'numeric' });\r\n\r\n\r\n  return (\r\n    <main className=\"container mx-auto max-w-3xl px-6 py-16\">\r\n      <div className=\"mb-10 text-center\">\r\n        <h1 className=\"text-3xl font-bold bg-gradient-to-r from-[#0284C7] to-[#0284C7]/80 bg-clip-text text-transparent\">\r\n          {t(\"Legal.termsOfUseTitle\", \"Terms of Use\")}\r\n        </h1>\r\n        <p className=\"text-sm text-muted-foreground mt-2\">\r\n          {`${t(\"Legal.lastUpdatedPrefix\", \"Last updated on\")} ${formattedDate}`}\r\n        </p>\r\n      </div>\r\n      <TermsOfUseContent termsContent={termsContent} />\r\n    </main>\r\n  );\r\n} \r\n"],"names":["TermsOfUseContent","termsContent","article","className","div","ReactMarkdown","remarkPlugins","remarkGfm","components","h1","props","h2","h3","p","ul","ol","li","a","strong","TermsOfUseClient","initialContent","initialLang","i18n","t","useTranslation","pathname","usePathname","setTermsContent","useState","langPrefix","setLangPrefix","isMounted","setIsMounted","loadTerms","useCallback","lang","processedContent","filePath","response","fetch","ok","content","text","replace","trim","error","console","getUrlLanguage","getLanguageFromPath","useEffect","language","changeLanguage","script","document","querySelector","createElement","src","defer","head","appendChild","title","handleLanguageChanged","customEvent","newLang","detail","SUPPORTED_LANGUAGES","includes","addEventListener","removeEventListener","urlLang","formattedDate","Date","toLocaleDateString","year","month","day","main"],"sourceRoot":""}