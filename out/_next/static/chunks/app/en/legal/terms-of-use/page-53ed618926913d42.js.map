{"version":3,"file":"static/chunks/app/en/legal/terms-of-use/page-53ed618926913d42.js","mappings":"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","sources":["webpack://_N_E/?ad86","webpack://_N_E/./src/app/en/legal/terms-of-use/page.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Mauro\\\\Repos\\\\Siempi\\\\Saas\\\\billingperiodallocator\\\\src\\\\app\\\\en\\\\legal\\\\terms-of-use\\\\page.tsx\");\n","\"use client\";\n\nimport { ReactNode, useCallback, useEffect, useState } from \"react\";\nimport { SUPPORTED_LANGUAGES, getLanguageFromPath } from \"@/translations\";\n\nimport ReactMarkdown from \"react-markdown\";\nimport dynamic from \"next/dynamic\";\nimport remarkGfm from \"remark-gfm\";\nimport { usePathname } from \"next/navigation\";\nimport { useTranslation } from \"@/translations\";\n\n// Create a NoSSR wrapper component with proper typing\nconst NoSSR = ({ children }: { children: ReactNode }) => {\n  return <>{children}</>;\n};\n\n// Define interface for component props\ninterface TermsOfUseContentProps {\n  termsContent: string;\n  isLoading: boolean;\n}\n\n// Use dynamic import with ssr: false to prevent SSR\nconst TermsOfUseContent = dynamic<TermsOfUseContentProps>(() =>\n  Promise.resolve(({ termsContent, isLoading }: TermsOfUseContentProps) => {\n    return (\n      <article className=\"prose prose-lg dark:prose-invert\">\n        {isLoading ? (\n          <div className=\"flex justify-center items-center py-16\">\n            <div className=\"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full\" />\n          </div>\n        ) : (\n          <div className=\"custom-markdown-container\">\n            <ReactMarkdown\n              remarkPlugins={[remarkGfm]}\n              components={{\n                h1: ({ ...props }) => <h1 {...props} className=\"text-2xl font-bold mt-12 mb-4 text-primary\" />,\n                h2: ({ ...props }) => <h2 {...props} className=\"text-xl font-semibold mt-12 mb-4 bg-gradient-to-r from-primary/90 to-primary/70 bg-clip-text text-transparent\" />,\n                h3: ({ ...props }) => <h3 {...props} className=\"text-lg font-medium mt-10 mb-3 text-primary\" />,\n                p: ({ ...props }) => <p {...props} className=\"text-sm leading-relaxed text-muted-foreground mb-6\" />,\n                ul: ({ ...props }) => <ul {...props} className=\"text-sm leading-relaxed text-muted-foreground mb-6 pl-6 list-disc\" />,\n                ol: ({ ...props }) => <ol {...props} className=\"text-sm leading-relaxed text-muted-foreground mb-6 pl-6 list-decimal\" />,\n                li: ({ ...props }) => <li {...props} className=\"mb-2\" />,\n                a: ({ ...props }) => <a {...props} className=\"text-primary hover:underline\" />,\n                strong: ({ ...props }) => <strong {...props} className=\"font-semibold\" />,\n              }}\n            >\n              {termsContent}\n            </ReactMarkdown>\n          </div>\n        )}\n      </article>\n    );\n  }),\n  { ssr: false }\n);\n\nexport default function TermsOfUsePageEN() {\n  const { i18n, t } = useTranslation();\n  const pathname = usePathname();\n  const [termsContent, setTermsContent] = useState<string>(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [langPrefix, setLangPrefix] = useState(\"en\");\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Function to load terms content - MOVED AND WRAPPED IN useCallback\n  const loadTerms = useCallback(async (lang: string) => {\n    setIsLoading(true);\n    try {\n      // Determine file path based on language\n      const langSuffix = lang === 'de' ? '.de' : '';\n      const response = await fetch(`/terms-of-use${langSuffix}.md`);\n\n      if (!response.ok) {\n        throw new Error('Failed to load terms');\n      }\n\n      const content = await response.text();\n      // Remove the first heading and date line to avoid duplication\n      const processedContent = content\n        .replace(/^# .*$/m, '') // Remove the first heading\n        .replace(/^Last updated on.*$/m, '') // Remove the date line for English\n        .replace(/^Zuletzt aktualisiert am.*$/m, '') // Remove the date line for German\n        .trim();\n\n      setTermsContent(processedContent);\n    } catch (error) {\n      console.error('Error loading terms of use:', error);\n      setTermsContent(lang === 'de'\n        ? 'Die Nutzungsbedingungen konnten nicht geladen werden. Bitte versuchen Sie es spÃ¤ter erneut.'\n        : 'Failed to load terms of use. Please try again later.');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [setIsLoading, setTermsContent]); // Dependencies for useCallback\n\n  // Get current URL language - this ensures we don't fight with the URL's language\n  const getUrlLanguage = useCallback(() => {\n    if (!pathname) return 'en';\n    const pathLanguage = getLanguageFromPath(pathname);\n    return pathLanguage || 'en';\n  }, [pathname]); // Added pathname as a dependency\n\n  // First effect to handle mounting only\n  useEffect(() => {\n    setIsMounted(true);\n\n    // Set language prefix from URL\n    const urlLang = getUrlLanguage();\n    setLangPrefix(urlLang);\n\n    // Sync i18n with URL language\n    if (i18n.language !== urlLang) {\n      i18n.changeLanguage(urlLang);\n    }\n\n    // Add PrivacyBee script\n    let script = document.querySelector<HTMLScriptElement>('script[src=\"https://app.privacybee.io/widget.js\"]');\n    if (!script) {\n      script = document.createElement('script');\n      script.src = \"https://app.privacybee.io/widget.js\";\n      script.defer = true;\n      document.head.appendChild(script);\n    }\n\n    // Load terms based on current language\n    loadTerms(urlLang);\n    // Set title after i18n might have changed language\n    document.title = t(\"Legal.termsOfUseTitle\") + \" | BillSplitter\";\n  }, [getUrlLanguage, i18n, loadTerms, isMounted, t]); // Added isMounted as loadTerms is now stable, added t\n\n  // Listen for language change events from the language toggler\n  useEffect(() => {\n    if (!isMounted) return;\n\n    const handleLanguageChanged = (e: Event) => {\n      const customEvent = e as CustomEvent;\n      const newLang = customEvent.detail?.language || customEvent.detail;\n\n      if (newLang && typeof newLang === 'string' && SUPPORTED_LANGUAGES.includes(newLang)) {\n        setLangPrefix(newLang);\n        loadTerms(newLang);\n      }\n    };\n\n    document.addEventListener('languageChanged', handleLanguageChanged);\n\n    return () => {\n      document.removeEventListener('languageChanged', handleLanguageChanged);\n    };\n  }, [isMounted, loadTerms]); // loadTerms is now stable\n\n  // Effect for pathname changes\n  useEffect(() => {\n    if (!isMounted) return;\n\n    const urlLang = getUrlLanguage();\n\n    // If URL language doesn't match current language prefix, update\n    if (urlLang !== langPrefix) {\n      setLangPrefix(urlLang);\n      loadTerms(urlLang);\n\n      // Sync i18n with URL\n      if (i18n.language !== urlLang) {\n        i18n.changeLanguage(urlLang);\n      }\n    }\n  }, [pathname, isMounted, langPrefix, i18n, getUrlLanguage, loadTerms]);\n\n  const today = new Date();\n  const formattedDate = today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });\n\n  return (\n    <main className=\"container mx-auto max-w-3xl px-6 py-16\">\n      <div className=\"mb-10 text-center\">\n        <h1 className=\"text-3xl font-bold bg-gradient-to-r from-[#0284C7] to-[#0284C7]/80 bg-clip-text text-transparent\">\n          {t(\"Legal.termsOfUseTitle\", \"Terms of Use\")}\n        </h1>\n        <p className=\"text-sm text-muted-foreground mt-2\">\n          {`${t(\"Legal.lastUpdatedPrefix\", \"Last updated on\")} ${formattedDate}`}\n        </p>\n      </div>\n      <NoSSR>\n        <TermsOfUseContent\n          termsContent={termsContent}\n          isLoading={isLoading}\n        />\n      </NoSSR>\n    </main>\n  );\n}\n"],"names":["NoSSR","children","TermsOfUseContent","dynamic","Promise","resolve","termsContent","isLoading","article","className","div","ReactMarkdown","remarkPlugins","remarkGfm","components","h1","props","h2","h3","p","ul","ol","li","a","strong","ssr","TermsOfUsePageEN","i18n","t","useTranslation","pathname","usePathname","setTermsContent","useState","setIsLoading","langPrefix","setLangPrefix","isMounted","setIsMounted","loadTerms","useCallback","lang","response","fetch","ok","processedContent","content","text","replace","error","console","getUrlLanguage","getLanguageFromPath","useEffect","urlLang","language","changeLanguage","script","document","querySelector","createElement","src","defer","head","appendChild","title","handleLanguageChanged","customEvent","newLang","detail","SUPPORTED_LANGUAGES","includes","addEventListener","removeEventListener","formattedDate","today","Date","toLocaleDateString","year","month","day","main"],"sourceRoot":""}