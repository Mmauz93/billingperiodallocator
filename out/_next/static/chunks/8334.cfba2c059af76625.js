"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8334],{38334:(e,t,a)=>{a.r(t),a.d(t,{InvoiceForm:()=>Q});var r=a(95155),s=a(62177);let o="yyyy-MM-dd",n="dd.MM.yyyy",l=[o,n,"MM/dd/yyyy","dd.MM.yy","MM/dd/yy","dd-MM-yyyy"];var i=a(4549),d=a(55594);let c=e=>e?(0,i._U)(e,l):null,u={startDateString:"",endDateString:"",includeEndDate:!0,splitPeriod:"yearly",amounts:[{value:""}]},m=e=>d.z.object({startDateString:d.z.string().optional(),endDateString:d.z.string().optional(),includeEndDate:d.z.boolean(),splitPeriod:d.z.enum(["yearly","quarterly","monthly"]),amounts:d.z.array(d.z.object({value:d.z.string().min(1,{message:e("InvoiceForm.errorAmountValueRequired")}).refine(e=>!isNaN(parseFloat(e))&&parseFloat(e)>0,{message:e("InvoiceForm.errorAmountPositive")})})).min(1,e("InvoiceForm.errorAmountRequired"))}).refine(e=>!!c(e.startDateString||""),{message:e("InvoiceForm.errorStartDateRequired"),path:["startDateString"]}).refine(e=>!!c(e.endDateString||""),{message:e("InvoiceForm.errorEndDateRequired"),path:["endDateString"]}).refine(e=>{let t=c(e.startDateString||""),a=c(e.endDateString||"");return!t||!a||a>=t},{message:e("InvoiceForm.errorEndDateBeforeStart"),path:["endDateString"]});var g=a(70290);let p="invoiceFormDataCache";function h(e){try{localStorage.removeItem(p)}catch{}e.reset(u)}var f=a(49103),v=a(51154),x=a(77116),y=a(62713),b=a(83039),j=a(12115),N=a(40646),S=a(85339),w=a(54861),D=a(30285),F=a(62523);function I(e){let{index:t,field:a,canRemove:s,onRemoveAction:o,hasError:n,errorMessage:l}=e,i=a.value&&!isNaN(parseFloat(a.value))&&parseFloat(a.value)>0;return(0,r.jsxs)(g.eI,{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)(g.lR,{htmlFor:`amount-${t}`,className:"text-sm font-medium",children:["#",t+1]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(F.p,{type:"number",step:"any",className:"focus:border-primary focus:ring-2 focus:ring-primary/20 transition-transform duration-150 pr-8",...a,id:`amount-${t}`,name:`amounts.${t}.value`})}),(0,r.jsxs)("div",{className:"absolute right-2 top-0 h-full flex items-center justify-center z-[1]",children:[i&&(0,r.jsx)("div",{className:"flex items-center justify-center h-5 w-5",children:(0,r.jsx)(N.A,{className:"h-4 w-4 text-success"})}),n&&(0,r.jsx)("div",{className:"flex items-center justify-center h-5 w-5",children:(0,r.jsx)(S.A,{className:"h-4 w-4 text-destructive"})})]})]}),s&&(0,r.jsx)(D.$,{type:"button",variant:"ghost",size:"icon",onClick:o,className:"text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-all duration-200 shrink-0","aria-label":"Remove amount",children:(0,r.jsx)(w.A,{className:"h-4 w-4 transition-transform duration-150 hover:scale-95"})})]})]}),n&&l&&(0,r.jsx)(g.C5,{className:"text-xs mt-1 error-message",children:l})]})}var E=a(69074),A=a(26681),C=a(20547),P=a(59434);function V(e){let{...t}=e;return(0,r.jsx)(C.bL,{"data-slot":"popover",...t})}function z(e){let{...t}=e;return(0,r.jsx)(C.l9,{"data-slot":"popover-trigger",...t})}function M(e){let{className:t,align:a="center",sideOffset:s=4,...o}=e,[n,l]=j.useState(!1),i=j.useRef(!0);return(j.useEffect(()=>{i.current=!0;let e=setTimeout(()=>{i.current&&l(!0)},10);return()=>{i.current=!1,clearTimeout(e),l(!1),"undefined"!=typeof document&&setTimeout(()=>{document.querySelectorAll("[data-radix-popover-content]").forEach(e=>{try{e&&e.parentNode&&e.parentNode.removeChild(e)}catch{}})},0)}},[]),n)?(0,r.jsx)(C.ZL,{children:(0,r.jsx)(C.UC,{"data-slot":"popover-content",align:a,sideOffset:s,className:(0,P.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),style:{backgroundColor:"hsl(var(--popover))",opacity:1},...o})}):null}var k=a(42355),_=a(13052),R=a(42507);function B(e){let{className:t,classNames:a,showOutsideDays:s=!0,locale:o,...n}=e;return(0,r.jsx)(R.h,{showOutsideDays:s,className:(0,P.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,P.cn)((0,D.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 transition-colors duration-200"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",month_grid:"w-full border-collapse space-y-1",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,P.cn)((0,D.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal bg-transparent rounded-md transition-colors duration-200","hover:bg-primary hover:text-primary-foreground","aria-selected:bg-primary aria-selected:text-primary-foreground aria-selected:font-bold","aria-selected:hover:bg-primary aria-selected:hover:text-primary-foreground","data-[current=true]:bg-accent/15 data-[current=true]:font-bold","active:scale-95 active:ring-1 active:ring-primary/50"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent/15 text-foreground hover:bg-primary hover:text-primary-foreground font-bold",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30 hover:bg-primary/50 hover:text-primary-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{Chevron:e=>{let{className:t,orientation:a,...s}=e;return"left"===a?(0,r.jsx)(k.A,{className:(0,P.cn)(t,"h-4 w-4"),...s}):(0,r.jsx)(_.A,{className:(0,P.cn)(t,"h-4 w-4"),...s})}},locale:o,weekStartsOn:o?.options?.weekStartsOn??1,...n})}function T(e){let{fieldName:t,label:a,placeholder:s,field:o,form:n,onFieldChangeAction:l,displayDateFormat:i,locale:d,disabled:u,autoFocus:m}=e,[p,h]=(0,j.useState)(!1),f=c(o.value??"")||("endDateString"===t?c(n.getValues("startDateString")??""):void 0)||new Date;return(0,j.useEffect)(()=>()=>{h(!1)},[]),(0,r.jsxs)(g.eI,{className:"flex flex-col",children:[(0,r.jsx)(g.lR,{htmlFor:t,children:a}),(0,r.jsxs)(V,{open:p,onOpenChange:h,children:[(0,r.jsx)(g.MJ,{children:(0,r.jsxs)("div",{className:"w-full relative",children:[(0,r.jsx)(F.p,{value:o.value,onChange:e=>{o.onChange(e),l(e)},onBlur:()=>n.trigger(t),placeholder:s,className:`w-full pr-16 ${n.formState.errors[t]?"border-destructive focus:border-destructive focus:ring-2 focus:ring-destructive/20":""}`,autoFocus:m,id:t,name:t}),o.value&&!n.formState.errors[t]&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-12 flex items-center z-[1]",children:(0,r.jsx)(N.A,{className:"h-4 w-4 text-success"})}),n.formState.errors[t]&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-12 flex items-center z-[1]",children:(0,r.jsx)(S.A,{className:"h-4 w-4 text-destructive"})}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center z-[1]",children:(0,r.jsx)(z,{asChild:!0,children:(0,r.jsx)(D.$,{type:"button",variant:"ghost",className:"h-7 w-7 p-0 rounded-full hover:bg-primary hover:text-primary-foreground transition-colors duration-200 cursor-pointer","aria-label":"Pick a date",children:(0,r.jsx)(E.A,{className:"h-4 w-4 transition-colors duration-200"})})})})]})}),(0,r.jsx)(M,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(B,{mode:"single",selected:c(o.value??"")||void 0,onSelect:e=>{if(e){let a=(0,A.GP)(e,i);n.setValue(t,a,{shouldValidate:!0})}h(!1)},initialFocus:!0,locale:d,defaultMonth:f,disabled:u})})]}),(0,r.jsx)(g.C5,{className:"text-xs mt-1 error-message",children:n.formState.errors[t]?.message})]})}function q(){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-2/5"}),(0,r.jsx)("div",{className:"h-10 bg-muted/60 rounded-md animate-pulse w-full"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-2/5"}),(0,r.jsx)("div",{className:"h-10 bg-muted/60 rounded-md animate-pulse w-full"})]})]}),(0,r.jsxs)("div",{className:"h-20 bg-muted/40 rounded-lg animate-pulse border border-muted/30 p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-40"}),(0,r.jsx)("div",{className:"h-3 bg-muted/60 rounded-sm animate-pulse w-56"})]}),(0,r.jsx)("div",{className:"h-6 w-12 bg-muted/60 rounded-full animate-pulse"})]}),(0,r.jsxs)("div",{className:"h-20 bg-muted/40 rounded-lg animate-pulse border border-muted/30 p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-32"}),(0,r.jsx)("div",{className:"h-3 bg-muted/60 rounded-sm animate-pulse w-64"})]}),(0,r.jsx)("div",{className:"h-10 w-28 bg-muted/60 rounded-md animate-pulse"})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-muted/30 p-6 shadow-xs space-y-4 bg-muted/10",children:[(0,r.jsx)("div",{className:"h-5 bg-muted/60 rounded-sm animate-pulse w-1/4"}),(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-3/5 mb-4"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-3 bg-muted/60 rounded-sm animate-pulse w-8"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"h-10 bg-muted/60 rounded-md animate-pulse flex-grow"}),(0,r.jsx)("div",{className:"h-10 w-10 bg-muted/60 rounded-md animate-pulse opacity-0"})]})]})}),(0,r.jsx)("div",{className:"h-8 bg-muted/60 rounded-md animate-pulse w-40 mt-6"})]}),(0,r.jsx)("div",{className:"h-11 bg-primary/40 rounded-md animate-pulse w-full"})]})}B.displayName="Calendar";var J=a(80333),L=a(45964),O=a.n(L),$=a(83339),Y=a(16781),U=a(90221);function Q(e){let{onCalculateAction:t,initialDemoData:a,onDemoDataApplied:l}=e,{t:i,i18n:d}=(0,Y.Bd)(),[N,S]=(0,j.useState)(!1),[w,F]=(0,j.useState)(!1),[E,A]=(0,j.useState)(""),[C,V]=(0,j.useState)(!1),z=(0,j.useRef)(!1),M=d.language.startsWith("de")?y.de:b.c,k=d.language.startsWith("de")?n:o,_=d.language.startsWith("de")?"z.B. 31.12.2023":"e.g. 2023-12-31",R=m(i),B=(0,s.mN)({resolver:(0,U.u)(R),defaultValues:u,mode:"onBlur"}),{fields:L,append:Q,remove:W}=(0,s.jz)({control:B.control,name:"amounts"}),G=(0,j.useMemo)(()=>O()(e=>{if(N&&z.current)try{let t=e.amounts?.length>0?e.amounts:[{value:""}],a={...e,amounts:t,splitPeriod:e.splitPeriod||"yearly"};console.log("[InvoiceForm] Saving form data to localStorage"),localStorage.setItem(p,JSON.stringify(a))}catch(e){console.error("[InvoiceForm] Failed to save form data to localStorage:",e)}},800),[N]),K=(0,s.FH)({control:B.control});(0,j.useEffect)(()=>{N&&z.current&&K&&G(B.getValues())},[K,G,B,N]),(0,j.useEffect)(()=>()=>{G.cancel(),console.log("[InvoiceForm] Component unmounting, cancelled pending save operations.")},[G]);let H=(0,j.useCallback)(e=>{F(!0),A(i("InvoiceForm.calculatingButton")),function(e,t,a){let r=c(e.startDateString||""),s=c(e.endDateString||""),o=e.amounts.map(e=>parseFloat(e.value)),n={startDate:r,endDate:s,includeEndDate:e.includeEndDate,splitPeriod:e.splitPeriod,amounts:o.filter(e=>!isNaN(e))};if(!r||!s)return t(n,null,new $.gK(a("InvoiceForm.errorInvalidDatesMessages",{defaultValue:"Valid start and end dates are required."}),$.OQ.INVALID_DATES,{startDateString:e.startDateString,endDateString:e.endDateString}));if(o.some(isNaN))return t(n,null,new $.gK(a("InvoiceForm.errorAmountPositive"),$.OQ.INVALID_AMOUNT,{invalidAmounts:e.amounts.filter(e=>isNaN(parseFloat(e.value))).map(e=>e.value)}));let l={startDate:r,endDate:s,includeEndDate:e.includeEndDate,splitPeriod:e.splitPeriod,amounts:o},i=(0,$.e9)(l);i.success?t(n,{totalDays:i.totalDays,originalTotalAmount:i.originalTotalAmount,adjustedTotalAmount:i.adjustedTotalAmount,resultsPerAmount:i.resultsPerAmount,aggregatedSplits:i.aggregatedSplits,calculationSteps:i.calculationSteps,splitPeriodUsed:i.splitPeriodUsed},void 0):t(n,null,i.error)}(e,(e,a,r)=>{a&&(V(!0),setTimeout(()=>V(!1),1500)),t(e,a,r)},i),F(!1),A(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))},[t,i]);(0,j.useEffect)(()=>{if(!N)return;let e=B.getValues(),t=!1;e.splitPeriod&&["yearly","quarterly","monthly"].includes(e.splitPeriod)||(B.setValue("splitPeriod","yearly"),t=!0),"boolean"!=typeof e.includeEndDate&&(B.setValue("includeEndDate",!0),t=!0),e.amounts&&0!==e.amounts.length||(B.setValue("amounts",[{value:""}]),t=!0),t&&console.log("[InvoiceForm] Applied default values for missing form fields")},[N,B]),(0,j.useEffect)(()=>{if(!N){console.log("[InvoiceForm] Component mounting"),S(!0),A(i("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}));return}z.current||(z.current=!0,console.log("[InvoiceForm] Initializing form data..."),function(e,t,a,r){try{if(t){console.log("[InvoiceForm] Using demo data from prop:",t);let s={startDateString:t.startDateString||"",endDateString:t.endDateString||"",includeEndDate:!0===t.includeEndDate,splitPeriod:t.splitPeriod||"yearly",amounts:[{value:t.amount?String(t.amount):""}]};e.reset(s),localStorage.setItem(p,JSON.stringify(s)),a&&(console.log("[InvoiceForm] Notifying parent that demo data was applied"),a()),setTimeout(()=>{e.trigger().then(t=>{t?(console.log("[InvoiceForm] Form is valid, auto-submitting"),e.handleSubmit(r)()):console.warn("[InvoiceForm] Auto-submit cancelled - validation failed:",e.formState.errors)})},350);return}{let t=new URLSearchParams(window.location.search);if("true"===t.get("clean")){console.log("[InvoiceForm] 'clean=true' parameter detected, clearing cache"),localStorage.removeItem(p),e.reset(u);return}}let s=localStorage.getItem(p);if(s){console.log("[InvoiceForm] Loading data from localStorage cache");try{let t=JSON.parse(s);t.amounts&&0!==t.amounts.length||(t.amounts=[{value:""}]),t.splitPeriod&&["yearly","quarterly","monthly"].includes(t.splitPeriod)||(t.splitPeriod="yearly"),e.reset(t)}catch(t){console.error("[InvoiceForm] Error parsing cached data:",t),h(e)}}else console.log("[InvoiceForm] No cached data found, using defaults")}catch(t){console.error("[InvoiceForm] Error during initialization:",t),h(e)}}(B,a,l,H))},[N,a,l,i,B,H]);let Z=()=>d.language.startsWith("de")?i("InvoiceForm.supportedDateFormats",{defaultValue:"Unterst\xfctzte Formate: TT.MM.JJJJ, JJJJ-MM-TT"}):i("InvoiceForm.supportedDateFormats",{defaultValue:"Supported formats: YYYY-MM-DD, DD.MM.YYYY"}),X=e=>{let t=e.target.value;B.clearErrors("startDateString"),B.setValue("startDateString",t,{shouldValidate:!1});let a=c(t);if(t&&!a)B.setError("startDateString",{type:"manual",message:Z()});else if(a){let e=c(B.getValues("endDateString")??"");e&&e<a&&B.setError("endDateString",{type:"manual",message:i("InvoiceForm.errorEndDateBeforeStart")})}B.trigger("startDateString")},ee=e=>{let t=e.target.value;B.clearErrors("endDateString"),B.setValue("endDateString",t,{shouldValidate:!1});let a=c(t);if(t&&!a)B.setError("endDateString",{type:"manual",message:Z()});else if(a){let e=c(B.getValues("startDateString")??"");e&&a<e&&B.setError("endDateString",{type:"manual",message:i("InvoiceForm.errorEndDateBeforeStart")})}B.trigger("endDateString")};return N?(0,r.jsx)(s.Op,{...B,children:(0,r.jsxs)("form",{onSubmit:B.handleSubmit(H),className:(0,P.cn)("space-y-6",N&&"opacity-100 transition-opacity duration-500 ease-in-out",!N&&"opacity-0"),children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(g.zB,{control:B.control,name:"startDateString",render:e=>{let{field:t}=e;return(0,r.jsx)(T,{fieldName:"startDateString",label:i("InvoiceForm.startDateLabel"),placeholder:_,field:t,form:B,onFieldChangeAction:X,displayDateFormat:k,locale:M,autoFocus:!0})}}),(0,r.jsx)(g.zB,{control:B.control,name:"endDateString",render:e=>{let{field:t}=e;return(0,r.jsx)(T,{fieldName:"endDateString",label:i("InvoiceForm.endDateLabel"),placeholder:_,field:t,form:B,onFieldChangeAction:ee,displayDateFormat:k,locale:M,disabled:e=>{let t=c(B.watch("startDateString")??"");return!!t&&e<t}})}})]}),(0,r.jsx)(g.zB,{control:B.control,name:"includeEndDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(g.lR,{htmlFor:"includeEndDate",className:"text-base",children:i("InvoiceForm.includeEndDateLabel")}),(0,r.jsx)(g.Rr,{children:i("InvoiceForm.includeEndDateDescription")})]}),(0,r.jsx)("div",{className:"flex items-center border-none outline-none",children:(0,r.jsx)(J.d,{checked:t.value,onCheckedChange:t.onChange,id:"includeEndDate",name:"includeEndDate"})})]})}}),(0,r.jsx)(g.zB,{control:B.control,name:"splitPeriod",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{className:"flex flex-col items-start justify-start rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5 pr-4 mb-3",children:[(0,r.jsx)(g.lR,{htmlFor:"splitPeriod",className:"text-base",children:i("InvoiceForm.splitPeriodLabel",{defaultValue:"Split Period"})}),(0,r.jsx)(g.Rr,{children:i("InvoiceForm.splitPeriodDescription",{defaultValue:"Choose how to split the invoice amounts."})})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)(x.l6,{onValueChange:t.onChange,defaultValue:t.value,value:t.value,name:t.name,children:[(0,r.jsx)(x.bq,{className:"w-full",id:"splitPeriod",children:(0,r.jsx)(x.yv,{placeholder:i("InvoiceForm.periodYearly",{defaultValue:"Yearly"})})}),(0,r.jsxs)(x.gC,{className:"!fixed !z-[9999] !overflow-visible shadow-lg",position:"popper",sideOffset:8,align:"center",avoidCollisions:!0,collisionPadding:20,children:[(0,r.jsx)(x.eb,{value:"yearly",className:"select-dropdown-item !cursor-pointer",style:{cursor:"pointer"},children:`${i("InvoiceForm.periodYearly",{defaultValue:"Yearly"})}`},"yearly"),(0,r.jsx)(x.eb,{value:"quarterly",className:"select-dropdown-item !cursor-pointer",style:{cursor:"pointer"},children:`${i("InvoiceForm.periodQuarterly",{defaultValue:"Quarterly"})}`},"quarterly"),(0,r.jsx)(x.eb,{value:"monthly",className:"select-dropdown-item !cursor-pointer",style:{cursor:"pointer"},children:`${i("InvoiceForm.periodMonthly",{defaultValue:"Monthly"})}`},"monthly")]})]}),(0,r.jsx)(g.C5,{})]})]})}}),(0,r.jsxs)("div",{className:"space-y-5 rounded-lg border p-6 shadow-xs",children:[(0,r.jsx)("h3",{className:"text-base font-medium",id:"amounts-section-label",children:i("InvoiceForm.amountsLabel")}),(0,r.jsx)(g.Rr,{children:i("InvoiceForm.amountsDescription")}),(0,r.jsxs)("div",{"aria-labelledby":"amounts-section-label",className:"space-y-4 mt-4",children:[L.map((e,t)=>(0,r.jsx)(g.zB,{control:B.control,name:`amounts.${t}.value`,render:e=>{let{field:a}=e;return(0,r.jsx)(I,{index:t,field:a,canRemove:L.length>1,onRemoveAction:()=>W(t),hasError:!!B.formState.errors.amounts?.[t]?.value,errorMessage:B.formState.errors.amounts?.[t]?.value?.message})}},e.id)),(0,r.jsxs)(D.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{Q({value:""}),setTimeout(()=>{let e=document.querySelectorAll('input[type="number"]');e.length>0&&e[e.length-1].focus()},10)},className:"mt-4",children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"})," ",i("InvoiceForm.addAmountButton")]}),B.formState.errors.amounts&&!B.formState.errors.amounts.root&&B.formState.errors.amounts.message&&(0,r.jsx)("p",{className:"text-sm font-medium text-destructive",children:B.formState.errors.amounts.message}),B.formState.errors.amounts?.root?.message&&(0,r.jsx)("p",{className:"text-sm font-medium text-destructive",children:B.formState.errors.amounts.root.message})]})]}),(0,r.jsx)(D.$,{type:"submit",variant:"default",className:`w-full bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-[1.02] px-6 py-2 h-11 font-medium rounded-md shadow-sm transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 ${C?"animate-successGlow":""}`,disabled:B.formState.isSubmitting||w,"aria-live":"polite",children:w?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),E]}):E})]})}):(0,r.jsx)(q,{})}},80333:(e,t,a)=>{a.d(t,{d:()=>l});var r=a(95155),s=a(12115),o=a(96440),n=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.bL,{className:(0,n.cn)("peer inline-flex h-[22px] w-[42px] shrink-0 cursor-pointer items-center rounded-sm border-0 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input dark:data-[state=unchecked]:bg-slate-700","rounded-sm",a),...s,ref:t,children:(0,r.jsx)(o.zi,{className:(0,n.cn)("pointer-events-none block h-[18px] w-[18px] rounded-xs bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-[19px] data-[state=unchecked]:translate-x-[3px]")})})});l.displayName=o.bL.displayName}}]);
//# sourceMappingURL=8334.cfba2c059af76625.js.map