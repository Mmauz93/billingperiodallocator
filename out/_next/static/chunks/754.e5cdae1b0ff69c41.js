"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{18754:(e,t,a)=>{a.r(t),a.d(t,{InvoiceForm:()=>U});var r=a(92237),s=a(40646),l=a(85339),n=a(69074),o=a(54861),i=a(49103),d=a(51154),u=a(6711),c=a(40714),m=a(32944),p=a(9282),g=a(43163),h=a(55551),f=a(26681),v=a(7038),x=a(98449);function y(e,t){return Number(Math.round(Number(e+"e"+t))+"e-"+t)}var S=a(17759),j=a(62177),D=a(14636),N=a(59409),b=a(59434),w=a(62713),I=a(83039),F=a(28738),E=a(23068),A=a(99481),M=a(30285),C=a(85511),P=a(62523),V=a(80333),z=a(45964),$=a.n(z),T=a(94219),B=a(55594),J=a(90221);let R="yyyy-MM-dd",q="dd.MM.yyyy",k=[R,q,"MM/dd/yyyy","dd.MM.yy","MM/dd/yy","dd-MM-yyyy"],Y=e=>{if(!e)return null;let t=e.trim();if(!/[\.\-\/]/.test(t)||!/^(\d{4}-\d{2}-\d{2}|\d{2}\.\d{2}\.\d{4}|\d{2}\/\d{2}\/\d{4}|\d{2}-\d{2}-\d{4})$/.test(t))return null;for(let e of k){let a=(0,F.qg)(t,e,new Date);if((0,E.f)(a))return(0,u.o)(a)}return null},O=e=>B.z.object({startDateString:B.z.string().optional(),endDateString:B.z.string().optional(),includeEndDate:B.z.boolean(),splitPeriod:B.z.enum(["yearly","quarterly","monthly"]),amounts:B.z.array(B.z.object({value:B.z.string().min(1,{message:e("InvoiceForm.errorAmountValueRequired")}).refine(e=>!isNaN(parseFloat(e))&&parseFloat(e)>0,{message:e("InvoiceForm.errorAmountPositive")})})).min(1,e("InvoiceForm.errorAmountRequired"))}).refine(e=>!!Y(e.startDateString||""),{message:e("InvoiceForm.errorStartDateRequired"),path:["startDateString"]}).refine(e=>!!Y(e.endDateString||""),{message:e("InvoiceForm.errorEndDateRequired"),path:["endDateString"]}).refine(e=>{let t=Y(e.startDateString||""),a=Y(e.endDateString||"");return!t||!a||a>=t},{message:e("InvoiceForm.errorEndDateBeforeStart"),path:["endDateString"]});function U(e){let{onCalculateAction:t,initialDemoData:a,onDemoDataApplied:F}=e,{t:E,i18n:z}=(0,T.Bd)(),[B,k]=(0,A.useState)(!1),[U,L]=(0,A.useState)(!1),[W,G]=(0,A.useState)(""),[Q,_]=(0,A.useState)(!1),H=(0,A.useRef)(!1),K=z.language.startsWith("de")?w.de:I.c,X=z.language.startsWith("de")?q:R,Z=z.language.startsWith("de")?"z.B. 31.12.2023":"e.g. 2023-12-31",ee="invoiceFormDataCache",[et,ea]=(0,A.useState)(!1),[er,es]=(0,A.useState)(!1),el=O(E),en=(0,j.mN)({resolver:(0,J.u)(el),defaultValues:{startDateString:"",endDateString:"",includeEndDate:!0,splitPeriod:"yearly",amounts:[{value:""}]},mode:"onBlur"}),{fields:eo,append:ei,remove:ed}=(0,j.jz)({control:en.control,name:"amounts"}),eu=(0,A.useMemo)(()=>$()(e=>{if(B)try{if(H.current){let t=e.amounts?.length>0?e.amounts:[{value:""}],a={...e,amounts:t};console.log("[InvoiceForm] Saving form data to localStorage:",a),localStorage.setItem(ee,JSON.stringify(a))}}catch(e){console.error("[InvoiceForm] Failed to save form data to localStorage:",e)}},500),[B]),ec=(0,j.FH)({control:en.control});(0,A.useEffect)(()=>{B&&eu(en.getValues())},[ec,eu,en,B]),(0,A.useEffect)(()=>()=>{eu.cancel(),ea(!1),es(!1),console.log("[InvoiceForm] Component unmounting, cancelled pending save operations.")},[eu]);let em=(0,A.useCallback)(e=>{L(!0),G(E("InvoiceForm.calculatingButton"));let a=Y(e.startDateString||""),r=Y(e.endDateString||"");if(!a||!r){t(null,null,E("Errors.unexpectedError")),L(!1),G(E("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}));return}let s=e.amounts.map(e=>Number(e.value)),l=e.splitPeriod||"yearly",n={startDate:a,endDate:r,includeEndDate:e.includeEndDate,splitPeriod:l,amounts:s};t(n,null,void 0);let o={startDate:a,endDate:r,includeEndDate:e.includeEndDate,amounts:s,splitPeriod:l};try{let e=function(e){let t=e.splitPeriod||"yearly",a={totalDuration:{days:0,start:"",end:"",included:e.includeEndDate},periodSegments:[],amountCalculations:[]};if(!e.amounts||0===e.amounts.length)return{totalDays:0,originalTotalAmount:0,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"At least one amount is required."},splitPeriodUsed:t};if(e.amounts.some(e=>isNaN(e)||null===e))return{totalDays:0,originalTotalAmount:0,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"Invalid non-numeric amount provided."},splitPeriodUsed:t};let r=y(e.amounts.reduce((e,t)=>e+t,0),2),s=(0,u.o)(e.startDate),l=(0,u.o)(e.endDate);if(e.includeEndDate&&(l=(0,c.f)(l,1)),a.totalDuration.start=(0,f.GP)(s,"yyyy-MM-dd"),a.totalDuration.end=(0,f.GP)(e.includeEndDate?e.endDate:(0,c.f)(l,-1),"yyyy-MM-dd"),s>=l)return{totalDays:0,originalTotalAmount:r,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"Start date must be before the effective end date."},splitPeriodUsed:t};let n=(0,x.c)(l,s);if(a.totalDuration.days=n,n<=0)return{totalDays:0,originalTotalAmount:r,adjustedTotalAmount:0,resultsPerAmount:[],aggregatedSplits:[],calculationSteps:{...a,error:"Calculated duration is zero or negative."},splitPeriodUsed:t};let o={},i=s;for(;i<l;){let e=function(e,t){let a=(0,h.C)(e);switch(t){case"monthly":return(0,f.GP)(e,"yyyy-MM");case"quarterly":let r=(0,v.F)(e);return`${a}-Q${r}`;default:return a.toString()}}(i,t),a=function(e,t){switch(t){case"monthly":return(0,u.o)((0,c.f)((0,m.p)(e),1));case"quarterly":return(0,u.o)((0,c.f)((0,p.j)(e),1));default:return(0,u.o)((0,c.f)((0,g.Q)(e),1))}}(i,t),r=l<a?l:a,s=(0,x.c)(r,i);if(s>0){let t=s/n;o[e]||(o[e]={days:0,proportion:0}),o[e].days+=s,o[e].proportion+=t}i=r}a.periodSegments=Object.entries(o).map(e=>{let[t,a]=e;return{periodIdentifier:t,days:a.days,proportion:a.proportion}}).sort((e,t)=>e.periodIdentifier.localeCompare(t.periodIdentifier));let d=[];for(let t of e.amounts){let e={originalAmount:t,periodSplits:[],discrepancy:0,finalSum:0},r=[];for(let a in o){let s=t*o[a].proportion;r.push({periodIdentifier:a,rawSplit:s}),e.periodSplits.push({periodIdentifier:a,rawSplit:s,roundedSplit:0,adjustment:0})}let s=r.map(e=>({...e,roundedSplit:y(e.rawSplit,2)}));s.forEach(t=>{let a=e.periodSplits.find(e=>e.periodIdentifier===t.periodIdentifier);a&&(a.roundedSplit=t.roundedSplit)});let l=y(s.reduce((e,t)=>e+t.roundedSplit,0),2),n=y(t-l,2);if(e.discrepancy=n,0!==n&&s.length>0){let t=r.reduce((e,t)=>Math.abs(t.rawSplit)>Math.abs(e.rawSplit)?t:e).periodIdentifier,a=s.find(e=>e.periodIdentifier===t);if(a){a.roundedSplit=y(a.roundedSplit+n,2);let r=e.periodSplits.find(e=>e.periodIdentifier===t);r&&(r.roundedSplit=a.roundedSplit,r.adjustment=n),e.adjustmentAppliedToPeriod=t}else console.warn("Could not find period to apply adjustment, discrepancy unapplied for this amount.")}let i={};s.forEach(e=>{i[e.periodIdentifier]={splitAmount:e.roundedSplit}});let u=y(s.reduce((e,t)=>e+t.roundedSplit,0),2);e.finalSum=u,d.push({originalAmount:t,adjustedTotalAmount:u,splits:i}),a.amountCalculations.push(e)}let S=Object.entries(o).map(e=>{let[t,a]=e,r=0;return d.forEach(e=>{r+=e.splits[t]?.splitAmount||0}),{periodIdentifier:t,daysInPeriod:a.days,proportion:a.proportion,totalSplitAmount:y(r,2)}}).sort((e,t)=>e.periodIdentifier.localeCompare(t.periodIdentifier)),j=y(S.reduce((e,t)=>e+t.totalSplitAmount,0),2),D=y(r-j,2);return Math.abs(D)>.01*e.amounts.length&&console.warn(`Potential rounding discrepancy: Original ${r}, Adjusted ${j}, Diff ${D}`),{totalDays:n,originalTotalAmount:r,adjustedTotalAmount:j,resultsPerAmount:d,aggregatedSplits:S,calculationSteps:a,splitPeriodUsed:t}}(o);setTimeout(()=>{e.calculationSteps?.error?t(n,null,(0,b.H)(e.calculationSteps.error)):e.aggregatedSplits&&0!==e.aggregatedSplits.length?(t(n,e),G(E("InvoiceForm.calculationComplete",{defaultValue:"Split completed successfully!"})),_(!0),setTimeout(()=>{G(E("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"})),_(!1)},2e3)):t(n,null,"Calculation completed but resulted in no splits."),L(!1)},300)}catch(a){let e;t(n,null,a instanceof Error||"string"==typeof a||a&&"object"==typeof a?a:E("Errors.unexpectedError")),setTimeout(()=>{L(!1),G(E("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"}))},300)}},[E,t,L,G,_]);(0,A.useEffect)(()=>{en.getValues("splitPeriod")||en.setValue("splitPeriod","yearly")},[en]),(0,A.useEffect)(()=>{B||(k(!0),G(E("InvoiceForm.calculateButton",{defaultValue:"Calculate Split"})),console.log("[InvoiceForm] Component mounted")),console.log("[InvoiceForm] Initializing form data...",{initialDemoData:a});let e=!1;if(a){console.log("[InvoiceForm] Using demo data from prop:",a);let t={startDateString:a.startDateString||"",endDateString:a.endDateString||"",includeEndDate:!0===a.includeEndDate,splitPeriod:a.splitPeriod||"yearly",amounts:[{value:a.amount?String(a.amount):""}]};en.reset(t);try{console.log("[InvoiceForm] Saving demo data to localStorage:",t),localStorage.setItem(ee,JSON.stringify(t))}catch(e){console.error("[InvoiceForm] Error saving demo data to localStorage:",e)}F&&(console.log("[InvoiceForm] Notifying parent that demo data was applied"),F()),e=!0,H.current=!0}else if(!H.current)if(H.current=!0,"true"===new URLSearchParams(window.location.search).get("clean"))console.log("[InvoiceForm] 'clean=true' parameter detected, clearing cache"),localStorage.removeItem(ee),en.reset({startDateString:"",endDateString:"",includeEndDate:!0,splitPeriod:"yearly",amounts:[{value:""}]});else{let e=localStorage.getItem(ee);if(e){console.log("[InvoiceForm] Loading data from localStorage cache:",e);try{let t=JSON.parse(e);t.amounts&&0!==t.amounts.length||(t.amounts=[{value:""}]),en.reset(t)}catch(e){console.error("[InvoiceForm] Error parsing cached data:",e),localStorage.removeItem(ee),en.reset({startDateString:"",endDateString:"",includeEndDate:!0,splitPeriod:"yearly",amounts:[{value:""}]})}}else console.log("[InvoiceForm] No cached data found, using defaults"),en.reset({startDateString:"",endDateString:"",includeEndDate:!0,splitPeriod:"yearly",amounts:[{value:""}]})}if(e){console.log("[InvoiceForm] Scheduling auto-submit");let e=setTimeout(()=>{en.trigger().then(e=>{e?(console.log("[InvoiceForm] Form is valid, auto-submitting"),en.handleSubmit(em)()):console.warn("[InvoiceForm] Auto-submit cancelled - validation failed:",en.formState.errors)})},350);return()=>clearTimeout(e)}},[E,em,a,F,en,B]);let ep=()=>z.language.startsWith("de")?E("InvoiceForm.supportedDateFormats",{defaultValue:"Unterst\xfctzte Formate: TT.MM.JJJJ, JJJJ-MM-TT"}):E("InvoiceForm.supportedDateFormats",{defaultValue:"Supported formats: YYYY-MM-DD, DD.MM.YYYY"}),eg=e=>{if(e){let t=(0,f.GP)(e,X);en.setValue("startDateString",t,{shouldValidate:!0})}ea(!1)},eh=e=>{if(e){let t=(0,f.GP)(e,X);en.setValue("endDateString",t,{shouldValidate:!0})}es(!1)},ef=e=>{let t=e.target.value;en.setValue("startDateString",t,{shouldValidate:!0}),en.trigger("startDateString").then(()=>{let e=Y(t);t&&!e&&en.setError("startDateString",{type:"manual",message:ep()})})},ev=e=>{let t=e.target.value;en.setValue("endDateString",t,{shouldValidate:!1});let a=Y(t),r=Y(en.getValues("startDateString")||"");en.clearErrors("endDateString"),t&&!a?en.setError("endDateString",{type:"manual",message:ep()}):a&&r&&a<r&&en.setError("endDateString",{type:"manual",message:E("InvoiceForm.errorEndDateBeforeStart")}),en.trigger("endDateString")};return B?(0,r.jsx)(j.Op,{...en,children:(0,r.jsxs)("form",{onSubmit:en.handleSubmit(em),className:(0,b.cn)("space-y-6",B&&"opacity-100 transition-opacity duration-500 ease-in-out",!B&&"opacity-0"),children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(S.zB,{control:en.control,name:"startDateString",render:e=>{let{field:t}=e;return(0,r.jsxs)(S.eI,{className:"flex flex-col",children:[(0,r.jsx)(S.lR,{htmlFor:"startDateString",children:E("InvoiceForm.startDateLabel")}),(0,r.jsxs)(D.AM,{open:et,onOpenChange:ea,children:[(0,r.jsx)(S.MJ,{children:(0,r.jsxs)("div",{className:"w-full relative",children:[(0,r.jsx)(P.p,{value:t.value,onChange:e=>{t.onChange(e),ef(e)},onBlur:()=>en.trigger("startDateString"),placeholder:Z,className:`w-full pr-16 ${en.formState.errors.startDateString?"border-destructive focus:border-destructive focus:ring-2 focus:ring-destructive/20":""}`,autoFocus:!0,id:"startDateString",name:"startDateString"}),t.value&&!en.formState.errors.startDateString&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-12 flex items-center z-[1]",children:(0,r.jsx)(s.A,{className:"h-4 w-4 text-green-500"})}),en.formState.errors.startDateString&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-12 flex items-center z-[1]",children:(0,r.jsx)(l.A,{className:"h-4 w-4 text-destructive"})}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center z-[1]",children:(0,r.jsx)(D.Wv,{asChild:!0,children:(0,r.jsx)(M.$,{type:"button",variant:"ghost",className:"h-7 w-7 p-0 rounded-full hover:bg-primary hover:text-primary-foreground transition-colors duration-200 cursor-pointer","aria-label":"Pick a date",children:(0,r.jsx)(n.A,{className:"h-4 w-4 transition-colors duration-200"})})})})]})}),(0,r.jsx)(D.hl,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(C.V,{mode:"single",selected:Y(en.watch("startDateString")??"")||void 0,onSelect:eg,initialFocus:!0,locale:K,defaultMonth:Y(en.watch("startDateString")??"")||new Date})})]}),(0,r.jsx)(S.C5,{className:"text-xs mt-1 error-message",children:en.formState.errors.startDateString?.message})]})}}),(0,r.jsx)(S.zB,{control:en.control,name:"endDateString",render:e=>{let{field:t}=e;return(0,r.jsxs)(S.eI,{className:"flex flex-col",children:[(0,r.jsx)(S.lR,{htmlFor:"endDateString",children:E("InvoiceForm.endDateLabel")}),(0,r.jsxs)(D.AM,{open:er,onOpenChange:es,children:[(0,r.jsx)(S.MJ,{children:(0,r.jsxs)("div",{className:"w-full relative",children:[(0,r.jsx)(P.p,{value:t.value,onChange:e=>{t.onChange(e),ev(e)},onBlur:()=>en.trigger("endDateString"),placeholder:Z,className:`w-full pr-16 ${en.formState.errors.endDateString?"border-destructive focus:border-destructive focus:ring-2 focus:ring-destructive/20":""}`,id:"endDateString",name:"endDateString"}),t.value&&!en.formState.errors.endDateString&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-12 flex items-center z-[1]",children:(0,r.jsx)(s.A,{className:"h-4 w-4 text-green-500"})}),en.formState.errors.endDateString&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-12 flex items-center z-[1]",children:(0,r.jsx)(l.A,{className:"h-4 w-4 text-destructive"})}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center z-[1]",children:(0,r.jsx)(D.Wv,{asChild:!0,children:(0,r.jsx)(M.$,{type:"button",variant:"ghost",className:"h-7 w-7 p-0 rounded-full hover:bg-primary hover:text-primary-foreground transition-colors duration-200 cursor-pointer","aria-label":"Pick a date",children:(0,r.jsx)(n.A,{className:"h-4 w-4 transition-colors duration-200"})})})})]})}),(0,r.jsx)(D.hl,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(C.V,{mode:"single",selected:Y(en.watch("endDateString")??"")||void 0,onSelect:eh,initialFocus:!0,locale:K,defaultMonth:Y(en.watch("endDateString")??"")||Y(en.watch("startDateString")??"")||new Date,disabled:e=>{let t=Y(en.watch("startDateString")??"");return!!t&&e<t}})})]}),(0,r.jsx)(S.C5,{className:"text-xs mt-1 error-message",children:en.formState.errors.endDateString?.message})]})}})]}),(0,r.jsx)(S.zB,{control:en.control,name:"includeEndDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(S.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(S.lR,{htmlFor:"includeEndDate",className:"text-base",children:E("InvoiceForm.includeEndDateLabel")}),(0,r.jsx)(S.Rr,{children:E("InvoiceForm.includeEndDateDescription")})]}),(0,r.jsx)(S.MJ,{children:(0,r.jsx)(V.d,{checked:t.value,onCheckedChange:t.onChange,id:"includeEndDate",name:"includeEndDate",className:"include-end-date-switch"})})]})}}),(0,r.jsx)(S.zB,{control:en.control,name:"splitPeriod",render:e=>{let{field:t}=e;return(0,r.jsxs)(S.eI,{className:"flex flex-col items-start justify-start rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5 pr-4 mb-3",children:[(0,r.jsx)(S.lR,{htmlFor:"splitPeriod",className:"text-base",children:E("InvoiceForm.splitPeriodLabel",{defaultValue:"Split Period"})}),(0,r.jsx)(S.Rr,{children:E("InvoiceForm.splitPeriodDescription",{defaultValue:"Choose how to split the invoice amounts."})})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)(N.l6,{onValueChange:t.onChange,defaultValue:t.value,value:t.value,name:t.name,children:[(0,r.jsx)(S.MJ,{children:(0,r.jsx)(N.bq,{className:"w-full",id:"splitPeriod",children:(0,r.jsx)(N.yv,{placeholder:E("InvoiceForm.periodYearly",{defaultValue:"Yearly"})})})}),(0,r.jsxs)(N.gC,{className:"!fixed !z-[9999] !overflow-visible shadow-lg",position:"popper",sideOffset:8,align:"center",avoidCollisions:!0,collisionPadding:20,children:[(0,r.jsx)(N.eb,{value:"yearly",className:"select-dropdown-item !cursor-pointer",style:{cursor:"pointer"},children:`${E("InvoiceForm.periodYearly",{defaultValue:"Yearly"})}`},"yearly"),(0,r.jsx)(N.eb,{value:"quarterly",className:"select-dropdown-item !cursor-pointer",style:{cursor:"pointer"},children:`${E("InvoiceForm.periodQuarterly",{defaultValue:"Quarterly"})}`},"quarterly"),(0,r.jsx)(N.eb,{value:"monthly",className:"select-dropdown-item !cursor-pointer",style:{cursor:"pointer"},children:`${E("InvoiceForm.periodMonthly",{defaultValue:"Monthly"})}`},"monthly")]})]}),(0,r.jsx)(S.C5,{})]})]})}}),(0,r.jsxs)("div",{className:"space-y-5 rounded-lg border p-6 shadow-xs",children:[(0,r.jsx)("h3",{className:"text-base font-medium",id:"amounts-section-label",children:E("InvoiceForm.amountsLabel")}),(0,r.jsx)(S.Rr,{children:E("InvoiceForm.amountsDescription")}),(0,r.jsxs)("div",{"aria-labelledby":"amounts-section-label",className:"space-y-4 mt-4",children:[eo.map((e,t)=>(0,r.jsx)(S.zB,{control:en.control,name:`amounts.${t}.value`,render:e=>{let{field:a}=e;return(0,r.jsxs)(S.eI,{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)(S.lR,{htmlFor:`amount-${t}`,className:"text-sm font-medium",children:["#",t+1]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(S.MJ,{children:(0,r.jsx)(P.p,{type:"number",step:"any",className:"focus:border-primary focus:ring-2 focus:ring-primary/20 transition-transform duration-150 pr-8",...a,id:`amount-${t}`,name:`amounts.${t}.value`})}),(0,r.jsxs)("div",{className:"absolute right-2 top-0 h-full flex items-center justify-center z-[1]",children:[a.value&&!isNaN(parseFloat(a.value))&&parseFloat(a.value)>0&&(0,r.jsx)("div",{className:"flex items-center justify-center h-5 w-5",children:(0,r.jsx)(s.A,{className:"h-4 w-4 text-green-500"})}),en.formState.errors.amounts?.[t]?.value&&(0,r.jsx)("div",{className:"flex items-center justify-center h-5 w-5",children:(0,r.jsx)(l.A,{className:"h-4 w-4 text-destructive"})})]})]}),eo.length>1&&(0,r.jsx)(M.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>ed(t),className:"text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-all duration-200 shrink-0","aria-label":"Remove amount",children:(0,r.jsx)(o.A,{className:"h-4 w-4 transition-transform duration-150 hover:scale-95"})})]})]}),(0,r.jsx)(S.C5,{className:"text-xs mt-1 error-message"})]})}},e.id)),(0,r.jsxs)(M.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{ei({value:""}),setTimeout(()=>{let e=document.querySelectorAll('input[type="number"]');e.length>0&&e[e.length-1].focus()},10)},className:"mt-4",children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4"})," ",E("InvoiceForm.addAmountButton")]}),en.formState.errors.amounts&&!en.formState.errors.amounts.root&&en.formState.errors.amounts.message&&(0,r.jsx)("p",{className:"text-sm font-medium text-destructive",children:en.formState.errors.amounts.message}),en.formState.errors.amounts?.root?.message&&(0,r.jsx)("p",{className:"text-sm font-medium text-destructive",children:en.formState.errors.amounts.root.message})]})]}),(0,r.jsx)(M.$,{type:"submit",disabled:en.formState.isSubmitting||U,className:`w-full bg-[#4a90e2] text-white hover:bg-[#4a90e2]/90 hover:scale-[1.02] px-6 py-2 h-11 font-medium rounded-md shadow-sm transition-all duration-200 hover:shadow-lg hover:shadow-[#4a90e2]/20 ${Q?"animate-success-glow":""}`,children:U?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),W]}):W})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-2/5"}),(0,r.jsx)("div",{className:"h-10 bg-muted/60 rounded-md animate-pulse w-full"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-2/5"}),(0,r.jsx)("div",{className:"h-10 bg-muted/60 rounded-md animate-pulse w-full"})]})]}),(0,r.jsxs)("div",{className:"h-20 bg-muted/40 rounded-lg animate-pulse border border-muted/30 p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-40"}),(0,r.jsx)("div",{className:"h-3 bg-muted/60 rounded-sm animate-pulse w-56"})]}),(0,r.jsx)("div",{className:"h-6 w-12 bg-muted/60 rounded-full animate-pulse"})]}),(0,r.jsxs)("div",{className:"h-20 bg-muted/40 rounded-lg animate-pulse border border-muted/30 p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-32"}),(0,r.jsx)("div",{className:"h-3 bg-muted/60 rounded-sm animate-pulse w-64"})]}),(0,r.jsx)("div",{className:"h-10 w-28 bg-muted/60 rounded-md animate-pulse"})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-muted/30 p-6 shadow-xs space-y-4 bg-muted/10",children:[(0,r.jsx)("div",{className:"h-5 bg-muted/60 rounded-sm animate-pulse w-1/4"}),(0,r.jsx)("div",{className:"h-4 bg-muted/60 rounded-sm animate-pulse w-3/5 mb-4"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-3 bg-muted/60 rounded-sm animate-pulse w-8"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("div",{className:"h-10 bg-muted/60 rounded-md animate-pulse flex-grow"}),(0,r.jsx)("div",{className:"h-10 w-10 bg-muted/60 rounded-md animate-pulse opacity-0"})]})]})}),(0,r.jsx)("div",{className:"h-8 bg-muted/60 rounded-md animate-pulse w-40 mt-6"})]}),(0,r.jsx)("div",{className:"h-11 bg-primary/40 rounded-md animate-pulse w-full"})]})}}}]);