{"version":3,"file":"static/chunks/6689-888642f7ad785aea.js","mappings":"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","sources":["webpack://_N_E/./src/lib/translation.ts","webpack://_N_E/./src/translations.ts","webpack://_N_E/./src/lib/language-service.ts","webpack://_N_E/./src/lib/utils.ts","webpack://_N_E/./src/components/translation-provider.tsx"],"sourcesContent":["/**\n * Simple, direct translation system with zero eval() usage\n * Now using language-service.ts for language management\n */\n\nimport { SupportedLanguage, getCurrentLanguage } from \"./language-service\";\n\nimport { TranslationContext } from \"../components/translation-provider\";\nimport deTranslations from \"../messages/de.json\";\nimport enTranslations from \"../messages/en.json\";\nimport { safeText } from \"./utils\";\nimport { useContext } from \"react\";\n\n// Type safety for translation objects\ntype TranslationResource = Record<string, string | Record<string, string>>;\ntype NestedTranslations = Record<string, TranslationResource>;\n\ninterface TranslationOptions {\n  defaultValue?: string;\n  values?: Record<string, string | number>;\n}\n\n// Translations store\nconst translations: Record<string, NestedTranslations> = {\n  en: { translation: enTranslations as TranslationResource },\n  de: { translation: deTranslations as TranslationResource },\n};\n\n/**\n * Get a translated string with NO eval\n * Compatible with i18next API - accepts either options object or defaultValue string\n */\nexport function t(\n  key: string,\n  optionsOrDefaultValue?: TranslationOptions | string,\n): string {\n  // Get current language from language service\n  const lang = getCurrentLanguage();\n\n  let options: TranslationOptions = {};\n\n  // Handle i18next compatibility where second param can be defaultValue string\n  if (typeof optionsOrDefaultValue === \"string\") {\n    options = { defaultValue: optionsOrDefaultValue };\n  } else if (optionsOrDefaultValue) {\n    options = optionsOrDefaultValue;\n  }\n\n  // Get the translation or default value\n  const translation = getTranslation(key, lang);\n\n  // Ensure we always have a string, not an object (prevents React Error #418)\n  const finalText = safeText(translation || options.defaultValue || key);\n\n  // Replace any {{key}} values\n  if (options.values && Object.keys(options.values).length > 0) {\n    return replaceValues(finalText, options.values);\n  }\n\n  return finalText;\n}\n\n/**\n * Get a translation from the nested structure with dot notation\n * This is a safer implementation without eval()\n */\nfunction getTranslation(\n  key: string,\n  lang: SupportedLanguage,\n): string | undefined {\n  // Get correct namespace\n  const namespace = \"translation\"; // We only use a single namespace\n  const resource = translations[lang]?.[namespace];\n\n  if (!resource) return undefined;\n\n  // Handle dot notation (e.g., \"header.title\")\n  const parts = key.split(\".\");\n  let current: unknown = resource;\n\n  // Navigate down the object path\n  for (const part of parts) {\n    if (\n      current === undefined ||\n      current === null ||\n      typeof current !== \"object\"\n    ) {\n      return undefined;\n    }\n\n    // Type assertion since we've checked current is an object\n    current = (current as Record<string, unknown>)[part];\n  }\n\n  // Return the found string or undefined - but ensure it's a string\n  return typeof current === \"string\" ? current : undefined;\n}\n\n/**\n * Replace {{key}} placeholders in a string with values\n */\nfunction replaceValues(\n  text: string,\n  values: Record<string, string | number>,\n): string {\n  return text.replace(/\\{\\{([^{}]+)\\}\\}/g, (match, key) => {\n    const replacement = values[key.trim()];\n    // Ensure replacement is always a string\n    return replacement !== undefined ? safeText(replacement) : match;\n  });\n}\n\n// Simple i18n interface for compatibility with existing code\nexport const i18n = {\n  // Note: We're not actually changing language here, just getting the current one\n  changeLanguage: () => {\n    console.warn(\n      \"This method is deprecated. Use the changeLanguage from language-service.ts instead\",\n    );\n    return false;\n  },\n  language: getCurrentLanguage(),\n  t,\n};\n\n// Export a hook-like function for React components\nexport function useTranslation() {\n  const {\n    language,\n    t: contextT,\n    changeLanguage: contextChangeLanguage,\n  } = useContext(TranslationContext);\n\n  // The t function from context already uses the correct language.\n  // The changeLanguage function from context will update the provider and global state.\n  return {\n    t: contextT,\n    i18n: {\n      language: language, // Use language from context\n      changeLanguage: contextChangeLanguage, // Use changeLanguage from context\n    },\n  };\n}\n\n// Enhanced Server-Side Translator function that gets language from params\nexport function getServerSideTranslator(lang: SupportedLanguage) {\n  return {\n    t: (\n      key: string,\n      optionsOrDefaultValue?: TranslationOptions | string,\n    ): string => {\n      let options: TranslationOptions = {};\n      if (typeof optionsOrDefaultValue === \"string\") {\n        options = { defaultValue: optionsOrDefaultValue };\n      } else if (optionsOrDefaultValue) {\n        options = optionsOrDefaultValue;\n      }\n\n      const translation = getTranslation(key, lang); // Use the passed 'lang'\n      const finalText = safeText(translation || options.defaultValue || key);\n\n      if (options.values && Object.keys(options.values).length > 0) {\n        return replaceValues(finalText, options.values);\n      }\n      return finalText;\n    },\n    language: lang, // Expose the language for consistency\n  };\n}\n","/**\n * Translation system entry point - 100% eval-free\n * This file exports from language-service.ts and lib/translation.ts for backward compatibility\n */\n\n// Import getCurrentLanguage specifically first\n\nimport { getCurrentLanguage } from \"./lib/language-service\";\n\n// Export these from language-service (the new central location)\nexport {\n  SUPPORTED_LANGUAGES,\n  DEFAULT_LANGUAGE as DEFAULT_LANGUAGE,\n  LANGUAGE_STORAGE_KEY,\n  getCurrentLanguage,\n  changeLanguage,\n  getLanguageFromPath,\n} from \"./lib/language-service\";\n\n// Export translation functions from translation.ts\nexport { t, i18n, useTranslation } from \"./lib/translation\";\n\n// For backward compatibility with existing code\nexport const getLanguage = getCurrentLanguage;\n","/**\n * Language Service - Single source of truth for language management\n * This service centralizes all language-related logic in one place\n */\n\n// Language-related constants\nexport const SUPPORTED_LANGUAGES = [\"en\", \"de\"] as const;\nexport type SupportedLanguage = (typeof SUPPORTED_LANGUAGES)[number];\nexport const DEFAULT_LANGUAGE: SupportedLanguage = \"en\";\nexport const LANGUAGE_COOKIE_NAME = \"NEXT_LOCALE\";\nexport const LANGUAGE_STORAGE_KEY = \"billingperiodallocator-language\";\n\n// Store the current language in memory\nlet currentLanguage: SupportedLanguage = DEFAULT_LANGUAGE;\n\n/**\n * Detect user's preferred language based on different sources\n * Order of precedence:\n * 1. URL path language segment\n * 2. Cookie\n * 3. Local storage\n * 4. Browser language\n * 5. Default language (en)\n */\nexport function detectLanguage(): SupportedLanguage {\n  if (typeof window === \"undefined\") {\n    // Server-side - can't detect much, will rely on Next.js params\n    return currentLanguage;\n  }\n\n  // Client-side detection (hydration phase)\n\n  // 1. First priority: Get language from URL path\n  const pathSegments = window.location.pathname.split(\"/\");\n  const urlLang =\n    pathSegments.length > 1 &&\n    SUPPORTED_LANGUAGES.includes(pathSegments[1] as SupportedLanguage)\n      ? (pathSegments[1] as SupportedLanguage)\n      : null;\n\n  // 2. Second priority: Check cookies\n  const getCookie = (name: string): string | null => {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop()?.split(\";\").shift() || null;\n    return null;\n  };\n  const cookieLang = getCookie(LANGUAGE_COOKIE_NAME);\n\n  // 3. Third priority: Check localStorage\n  const storedLang = localStorage.getItem(LANGUAGE_STORAGE_KEY);\n\n  // 4. Fourth priority: Check browser language\n  const browserLang =\n    navigator.language &&\n    SUPPORTED_LANGUAGES.includes(\n      navigator.language.substring(0, 2).toLowerCase() as SupportedLanguage,\n    )\n      ? (navigator.language.substring(0, 2).toLowerCase() as SupportedLanguage)\n      : null;\n\n  // Use best source available\n  const detectedLang =\n    (urlLang && SUPPORTED_LANGUAGES.includes(urlLang) ? urlLang : null) ||\n    (cookieLang && SUPPORTED_LANGUAGES.includes(cookieLang as SupportedLanguage)\n      ? (cookieLang as SupportedLanguage)\n      : null) ||\n    (storedLang && SUPPORTED_LANGUAGES.includes(storedLang as SupportedLanguage)\n      ? (storedLang as SupportedLanguage)\n      : null) ||\n    (browserLang && SUPPORTED_LANGUAGES.includes(browserLang)\n      ? browserLang\n      : null) ||\n    DEFAULT_LANGUAGE;\n\n  // Update storage if URL language differs\n  if (urlLang && storedLang !== urlLang) {\n    localStorage.setItem(LANGUAGE_STORAGE_KEY, urlLang);\n  }\n\n  return detectedLang;\n}\n\n/**\n * Initialize the language service (call once during app startup)\n */\nexport function initializeLanguage(initialLanguage?: SupportedLanguage): void {\n  // Set the initial language if provided (usually from URL/server)\n  if (initialLanguage && SUPPORTED_LANGUAGES.includes(initialLanguage)) {\n    currentLanguage = initialLanguage;\n  } else {\n    // Otherwise detect from available sources\n    currentLanguage = detectLanguage();\n  }\n\n  // Set html attributes for accessibility and styling\n  if (typeof document !== \"undefined\") {\n    document.documentElement.lang = currentLanguage;\n    document.documentElement.setAttribute(\"data-lang\", currentLanguage);\n    document.documentElement.classList.add(`lang-${currentLanguage}`);\n  }\n}\n\n/**\n * Get the current language\n */\nexport function getCurrentLanguage(): SupportedLanguage {\n  // Force detection if not yet initialized\n  if (!currentLanguage) {\n    currentLanguage = detectLanguage();\n  }\n  return currentLanguage;\n}\n\n/**\n * Set a cookie for language persistence\n */\nexport function setLanguageCookie(\n  lang: SupportedLanguage,\n  days: number = 365,\n): void {\n  if (typeof document === \"undefined\") return;\n\n  const date = new Date();\n  date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n  const expires = `; expires=${date.toUTCString()}`;\n  document.cookie = `${LANGUAGE_COOKIE_NAME}=${lang}${expires}; path=/; SameSite=Lax`;\n\n  // Also set application-specific cookie for backward compatibility\n  document.cookie = `${LANGUAGE_STORAGE_KEY}=${lang}${expires}; path=/; SameSite=Lax`;\n}\n\n/**\n * Change the language and update all storage locations\n */\nexport function changeLanguage(\n  lang: SupportedLanguage,\n  options: { navigate?: boolean } = {},\n): boolean {\n  // Validate language\n  if (!SUPPORTED_LANGUAGES.includes(lang)) {\n    console.warn(`Attempted to change to unsupported language: ${lang}`);\n    return false;\n  }\n\n  // Skip if same language\n  if (lang === currentLanguage) return false;\n\n  // Update in-memory value\n  currentLanguage = lang;\n\n  // Client-side updates\n  if (typeof window !== \"undefined\") {\n    // Update storage\n    localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);\n    setLanguageCookie(lang);\n\n    // Update HTML attributes\n    document.documentElement.lang = lang;\n    document.documentElement.setAttribute(\"data-lang\", lang);\n\n    // Remove old language classes and add new one\n    SUPPORTED_LANGUAGES.forEach((l) => {\n      document.documentElement.classList.remove(`lang-${l}`);\n    });\n    document.documentElement.classList.add(`lang-${lang}`);\n\n    // Notify components via custom event\n    const event = new CustomEvent(\"languageChanged\", {\n      detail: { language: lang },\n    });\n    document.dispatchEvent(event);\n\n    // Handle navigation if requested\n    if (options.navigate) {\n      const pathname = window.location.pathname;\n      const pathSegments = pathname.split(\"/\");\n\n      if (\n        pathSegments.length > 1 &&\n        SUPPORTED_LANGUAGES.includes(pathSegments[1] as SupportedLanguage)\n      ) {\n        // Replace language segment in URL\n        pathSegments[1] = lang;\n        const newPath = pathSegments.join(\"/\");\n        window.location.href = newPath;\n      } else {\n        // Add language segment if missing\n        window.location.href = `/${lang}${pathname}`;\n      }\n    }\n  }\n\n  return true;\n}\n\n/**\n * Extract language from URL path\n */\nexport function getLanguageFromPath(path: string): SupportedLanguage | null {\n  if (!path) return null;\n\n  const segments = path.split(\"/\");\n  if (\n    segments.length > 1 &&\n    SUPPORTED_LANGUAGES.includes(segments[1] as SupportedLanguage)\n  ) {\n    return segments[1] as SupportedLanguage;\n  }\n\n  return null;\n}\n\n/**\n * Generate a URL with the specified language\n */\nexport function getLanguageUrl(lang: SupportedLanguage, path: string): string {\n  if (!path) return `/${lang}/`;\n\n  // Extract current path without language\n  const segments = path.split(\"/\");\n  const currentLang =\n    segments.length > 1 &&\n    SUPPORTED_LANGUAGES.includes(segments[1] as SupportedLanguage)\n      ? segments[1]\n      : null;\n\n  if (currentLang) {\n    // Replace language in path\n    segments[1] = lang;\n    return segments.join(\"/\");\n  } else {\n    // Add language to path\n    return `/${lang}${path}`;\n  }\n}\n\n// Initialize language detection on import (server-side)\n// Client-side will initialize via Provider\nif (typeof window === \"undefined\") {\n  initializeLanguage();\n}\n","import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * Safely converts any value to a string to prevent React error #418\n * This helps when displaying dynamic content that might be objects\n */\nexport function safeText(value: unknown): string {\n  if (value === null || value === undefined) {\n    return \"\";\n  }\n\n  if (typeof value === \"string\") {\n    return value;\n  }\n\n  if (typeof value === \"object\") {\n    try {\n      return JSON.stringify(value);\n    } catch {\n      return \"[Object]\";\n    }\n  }\n\n  return String(value);\n}\n","\"use client\";\n\nimport React, { createContext, useEffect, useMemo, useState } from \"react\";\nimport {\n  SupportedLanguage,\n  changeLanguage,\n  getCurrentLanguage,\n  getLanguageFromPath,\n  initializeLanguage,\n} from \"@/lib/language-service\";\n\nimport { t as globalT } from \"@/translations\";\nimport { usePathname } from \"next/navigation\";\n\ninterface ITranslationContext {\n  language: SupportedLanguage;\n  t: typeof globalT;\n  changeLanguage: typeof changeLanguage;\n}\n\nconst defaultContextValue: ITranslationContext = {\n  language: \"en\",\n  t: (\n    key: string,\n    optionsOrDefaultValue?: Parameters<typeof globalT>[1],\n  ): string => {\n    const optionsAsObject =\n      typeof optionsOrDefaultValue === \"object\"\n        ? optionsOrDefaultValue\n        : undefined;\n    const defaultValueAsString =\n      typeof optionsOrDefaultValue === \"string\"\n        ? optionsOrDefaultValue\n        : undefined;\n\n    if (optionsAsObject?.defaultValue) {\n      return optionsAsObject.defaultValue;\n    }\n    if (defaultValueAsString) {\n      return defaultValueAsString;\n    }\n    return key;\n  },\n  changeLanguage: () => false,\n};\n\nexport const TranslationContext =\n  createContext<ITranslationContext>(defaultContextValue);\n\nexport default function TranslationProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const pathname = usePathname() || \"\";\n\n  const pathLanguage = getLanguageFromPath(pathname);\n\n  const [contextLang, setContextLang] = useState<SupportedLanguage>(\n    pathLanguage || getCurrentLanguage(),\n  );\n\n  useEffect(() => {\n    if (pathLanguage) {\n      initializeLanguage(pathLanguage);\n      setContextLang(pathLanguage);\n    } else {\n      const detectedLang = getCurrentLanguage();\n      setContextLang(detectedLang);\n    }\n  }, [pathLanguage]);\n\n  useEffect(() => {\n    if (pathLanguage && pathLanguage !== contextLang) {\n      initializeLanguage(pathLanguage);\n      setContextLang(pathLanguage);\n    }\n  }, [pathname, contextLang, pathLanguage]);\n\n  useEffect(() => {\n    const handleLanguageChanged = (e: Event) => {\n      const customEvent = e as CustomEvent;\n      const newLang = customEvent.detail?.language as SupportedLanguage;\n\n      if (newLang && newLang !== contextLang) {\n        setContextLang(newLang);\n      }\n    };\n\n    document.addEventListener(\"languageChanged\", handleLanguageChanged);\n    return () => {\n      document.removeEventListener(\"languageChanged\", handleLanguageChanged);\n    };\n  }, [contextLang]);\n\n  const handleChangeLanguage = (lang: SupportedLanguage): boolean => {\n    return changeLanguage(lang, { navigate: true });\n  };\n\n  const providerValue = useMemo(\n    () => ({\n      language: contextLang,\n      t: globalT,\n      changeLanguage: handleChangeLanguage,\n    }),\n    [contextLang],\n  );\n\n  return (\n    <TranslationContext.Provider value={providerValue}>\n      {children}\n    </TranslationContext.Provider>\n  );\n}\n"],"names":["translations","en","translation","enTranslations","de","deTranslations","t","key","optionsOrDefaultValue","lang","getCurrentLanguage","options","defaultValue","getTranslation","resource","namespace","undefined","parts","split","current","part","finalText","safeText","values","Object","keys","length","replaceValues","text","replace","match","replacement","trim","useTranslation","language","contextT","changeLanguage","contextChangeLanguage","useContext","TranslationContext","i18n","SUPPORTED_LANGUAGES","LANGUAGE_COOKIE_NAME","LANGUAGE_STORAGE_KEY","detectLanguage","DEFAULT_LANGUAGE","pathSegments","window","location","pathname","urlLang","includes","cookieLang","getCookie","document","cookie","name","pop","shift","storedLang","localStorage","getItem","browserLang","navigator","substring","toLowerCase","detectedLang","setItem","initializeLanguage","initialLanguage","currentLanguage","documentElement","setAttribute","classList","add","console","warn","setLanguageCookie","days","date","Date","setTime","getTime","toUTCString","expires","forEach","remove","l","event","CustomEvent","detail","dispatchEvent","navigate","newPath","join","href","getLanguageFromPath","path","segments","cn","inputs","twMerge","clsx","value","JSON","stringify","String","createContext","optionsAsObject","defaultValueAsString","TranslationProvider","children","usePathname","pathLanguage","contextLang","setContextLang","useState","useEffect","handleLanguageChanged","newLang","e","addEventListener","removeEventListener","handleChangeLanguage","providerValue","useMemo","globalT","Provider"],"sourceRoot":""}